# -----------------------------------------------------------------------
# [y] hybris Platform
#
# Copyright (c) 2018 SAP SE or an SAP affiliate company.  All rights reserved.
#
# This software is the confidential and proprietary information of SAP
# ("Confidential Information"). You shall not disclose such Confidential
# Information and shall use it only in accordance with the terms of the
# license agreement you entered into with SAP.
# -----------------------------------------------------------------------

# ImpEx for Promotions for Powertools Store
$defaultPromoGrp=powertoolsPromoGrp
$ruleImportProcessor=processor=de.hybris.platform.ruleengineservices.impex.impl.ConditionalImportProcessor,condition=de.hybris.platform.ruleengineservices.impex.impl.RuleImportCondition



############################# RULE GROUPS ##########################
INSERT_UPDATE RuleGroup;code[unique=true]
;orderPromotionRuleGroup
;productPromotionRuleGroup
;customerPromotionRuleGroup
;couponPromotionRuleGroup

############################# PROMOTION RULES ##########################
INSERT_UPDATE PromotionSourceRule[$ruleImportProcessor];code[unique=true];priority;maxAllowedRuns;ruleGroup(code);conditions;actions;website(Identifier)[default=$defaultPromoGrp];status(code)[unique=true,default=UNPUBLISHED]
;3_percent_off_orders_over_500_USD;40;1;orderPromotionRuleGroup;"[{""children"":[],""parameters"":{""value"":{""type"":""Map(ItemType(Currency),java.math.BigDecimal)"",""uuid"":""0472c08a-3a9a-4696-aba1-9e044d540a49"",""value"":{""USD"":500}},""operator"":{""type"":""Enum(de.hybris.platform.ruledefinitions.AmountOperator)"",""uuid"":""ff8d6f47-d08b-41a4-8eac-86168d132da3"",""value"":""GREATER_THAN""}},""definitionId"":""y_cart_total""}]";"[{""parameters"":{""value"":{""type"":""java.math.BigDecimal"",""uuid"":""3ae37229-4a94-4aba-821b-aaf640c19423"",""value"":3}},""definitionId"":""y_order_percentage_discount""}]";;
;750_USD_off_orders_over_10000_USD;30;1;orderPromotionRuleGroup;"[{""children"":[],""parameters"":{""value"":{""type"":""Map(ItemType(Currency),java.math.BigDecimal)"",""uuid"":""5b438fb1-6548-448f-acba-0ccff49021ef"",""value"":{""USD"":10000}},""operator"":{""type"":""Enum(de.hybris.platform.ruledefinitions.AmountOperator)"",""uuid"":""9f4b12b5-9cd2-40cc-b163-9f3786b5fa7b"",""value"":""GREATER_THAN""}},""definitionId"":""y_cart_total""}]";"[{""parameters"":{""value"":{""type"":""Map(ItemType(Currency),java.math.BigDecimal)"",""uuid"":""368d4c9e-74db-4f12-a17c-a96282d5d7ac"",""value"":{""USD"":750}}},""definitionId"":""y_order_fixed_discount""}]";;
;10_percent_off_on_Sanders;75;1;productPromotionRuleGroup;"[{""children"":[{""children"":[],""parameters"":{""quantity"":{""type"":""java.lang.Integer"",""uuid"":""6307770f-e851-45a3-bc73-88634f8a4443"",""value"":1},""categories_operator"":{""type"":""Enum(de.hybris.platform.ruledefinitions.CollectionOperator)"",""uuid"":""c361f681-2f88-44c4-acf5-27281568e313"",""value"":""CONTAINS_ANY""},""excluded_categories"":{""type"":""List(ItemType(Category))"",""uuid"":""dd0f76d2-f8be-4dc0-a68a-b94c2259327b""},""categories"":{""type"":""List(ItemType(Category))"",""uuid"":""83e6ca48-3441-49e2-b3ff-eabb479e9966"",""value"":[""1596""]},""excluded_products"":{""type"":""List(ItemType(Product))"",""uuid"":""047bea52-4d89-4c97-8994-442239fc456c""},""operator"":{""type"":""Enum(de.hybris.platform.ruledefinitions.AmountOperator)"",""uuid"":""631c6ced-468c-46c8-b4ca-97a3a3ac10b8"",""value"":""GREATER_THAN_OR_EQUAL""}},""definitionId"":""y_qualifying_categories""}],""parameters"":{""operator"":{""type"":""Enum(de.hybris.platform.ruleengineservices.definitions.conditions.RuleGroupOperator)"",""uuid"":""0bc4e42c-3b09-426c-a964-d5e7a296c498"",""value"":""OR""}},""definitionId"":""y_group""}]";"[{""parameters"":{""value"":{""type"":""java.math.BigDecimal"",""uuid"":""a1a5d598-c351-43a4-92bf-eb63d877496a"",""value"":10}},""definitionId"":""y_order_entry_percentage_discount""}]";;
;5_percent_off_orders_for_Bronze_Loyalty_Club_members;20;1;customerPromotionRuleGroup;"[{""children"":[],""parameters"":{""customer_groups"":{""type"":""List(ItemType(UserGroup))"",""uuid"":""bc52ebe5-e161-4945-bf1b-ecd29d3fc357"",""value"":[""bronzeloyalty""]},""customer_groups_operator"":{""type"":""Enum(de.hybris.platform.ruledefinitions.CollectionOperator)"",""uuid"":""e7637460-ef7e-4bbf-a999-e3191315c244"",""value"":""CONTAINS_ANY""},""customers"":{""type"":""List(ItemType(Customer))"",""uuid"":""e5892d9a-fe02-4701-bb65-b6e1ea67ef4a"",""value"":[]},""excluded_customer_groups"":{""type"":""List(ItemType(UserGroup))"",""uuid"":""85a08e42-744c-4a4c-93af-0359c89708d8"",""value"":[]},""excluded_customers"":{""type"":""List(ItemType(Customer))"",""uuid"":""6d06b559-cdb5-43af-94ac-cff35bf1e92c"",""value"":[]}},""definitionId"":""y_target_customers""}]";"[{""parameters"":{""value"":{""type"":""java.math.BigDecimal"",""uuid"":""7a5bec37-9ab2-4452-beb4-6496f948fa83"",""value"":5}},""definitionId"":""y_order_percentage_discount""}]";;
;7_percent_off_orders_for_Silver_Loyalty_Club_members;20;1;customerPromotionRuleGroup;"[{""children"":[],""parameters"":{""customer_groups"":{""type"":""List(ItemType(UserGroup))"",""uuid"":""bc52ebe5-e161-4945-bf1b-ecd29d3fc357"",""value"":[""silverloyalty""]},""customer_groups_operator"":{""type"":""Enum(de.hybris.platform.ruledefinitions.CollectionOperator)"",""uuid"":""e7637460-ef7e-4bbf-a999-e3191315c244"",""value"":""CONTAINS_ANY""},""customers"":{""type"":""List(ItemType(Customer))"",""uuid"":""e5892d9a-fe02-4701-bb65-b6e1ea67ef4a"",""value"":[]},""excluded_customer_groups"":{""type"":""List(ItemType(UserGroup))"",""uuid"":""85a08e42-744c-4a4c-93af-0359c89708d8"",""value"":[]},""excluded_customers"":{""type"":""List(ItemType(Customer))"",""uuid"":""6d06b559-cdb5-43af-94ac-cff35bf1e92c"",""value"":[]}},""definitionId"":""y_target_customers""}]";"[{""parameters"":{""value"":{""type"":""java.math.BigDecimal"",""uuid"":""7a5bec37-9ab2-4452-beb4-6496f948fa83"",""value"":7}},""definitionId"":""y_order_percentage_discount""}]";;
;10_percent_off_orders_for_Gold_Loyalty_Club_members;20;1;customerPromotionRuleGroup;"[{""children"":[],""parameters"":{""customer_groups"":{""type"":""List(ItemType(UserGroup))"",""uuid"":""bc52ebe5-e161-4945-bf1b-ecd29d3fc357"",""value"":[""goldloyalty""]},""customer_groups_operator"":{""type"":""Enum(de.hybris.platform.ruledefinitions.CollectionOperator)"",""uuid"":""e7637460-ef7e-4bbf-a999-e3191315c244"",""value"":""CONTAINS_ANY""},""customers"":{""type"":""List(ItemType(Customer))"",""uuid"":""e5892d9a-fe02-4701-bb65-b6e1ea67ef4a"",""value"":[]},""excluded_customer_groups"":{""type"":""List(ItemType(UserGroup))"",""uuid"":""85a08e42-744c-4a4c-93af-0359c89708d8"",""value"":[]},""excluded_customers"":{""type"":""List(ItemType(Customer))"",""uuid"":""6d06b559-cdb5-43af-94ac-cff35bf1e92c"",""value"":[]}},""definitionId"":""y_target_customers""}]";"[{""parameters"":{""value"":{""type"":""java.math.BigDecimal"",""uuid"":""7a5bec37-9ab2-4452-beb4-6496f948fa83"",""value"":10}},""definitionId"":""y_order_percentage_discount""}]";;
;product_buy_2_power_drills_get_1_free;150;1;productPromotionRuleGroup;"[{""definitionId"":""y_container"",""parameters"":{""id"":{""uuid"":""04d63b64-8db5-4935-8255-7ecc2ad47e43"",""type"":""java.lang.String"",""value"":""Container_x""}},""children"":[{""definitionId"":""y_qualifying_categories"",""parameters"":{""quantity"":{""uuid"":""c1f4ab7e-297e-4b3e-a790-6b4b6d7a52bc"",""type"":""java.lang.Integer"",""value"":1},""categories_operator"":{""uuid"":""dd2c31b0-06f7-4ded-8cd2-0269010f0eb5"",""type"":""Enum(de.hybris.platform.ruledefinitions.CollectionOperator)"",""value"":""CONTAINS_ALL""},""excluded_categories"":{""uuid"":""2e3e3033-fd27-48e0-8e64-83519b1124af"",""type"":""List(ItemType(Category))""},""categories"":{""uuid"":""d1110cbc-1837-4b0b-9fd7-adfa4e9b7b23"",""type"":""List(ItemType(Category))"",""value"":[""1360""]},""excluded_products"":{""uuid"":""b3c57914-3750-4aaf-b6cf-3211e24c04ba"",""type"":""List(ItemType(Product))""},""operator"":{""uuid"":""42eb6462-7700-442f-9e51-a8462c70fc6f"",""type"":""Enum(de.hybris.platform.ruledefinitions.AmountOperator)"",""value"":""GREATER_THAN_OR_EQUAL""}},""children"":[]}]}]";"[{""definitionId"":""y_partner_order_entry_percentage_discount"",""parameters"":{""selection_strategy"":{""uuid"":""1897f037-c27a-43a0-82da-8d60da5058b3"",""type"":""Enum(de.hybris.platform.ruleengineservices.enums.OrderEntrySelectionStrategy)"",""value"":""CHEAPEST""},""qualifying_containers"":{""uuid"":""887c10b2-9f61-432d-a7d4-1cf74cd92b47"",""type"":""Map(java.lang.String,java.lang.Integer)"",""value"":{""Container_x"":3}},""target_containers"":{""uuid"":""33d85bbf-54c2-49d7-aba8-702fcb9d5988"",""type"":""Map(java.lang.String,java.lang.Integer)"",""value"":{""Container_x"":1}},""value"":{""uuid"":""65c5bd5f-546f-410f-8ae2-a2e866e2f890"",""type"":""java.math.BigDecimal"",""value"":100}}}]";;
;drill_screwdriver_sander_for_fixed_price;140;1;productPromotionRuleGroup;"[{""children"":[{""children"":[],""parameters"":{""quantity"":{""type"":""java.lang.Integer"",""uuid"":""75ee0f18-7d60-4066-8205-0114ae96df66"",""value"":1},""operator"":{""type"":""Enum(de.hybris.platform.ruledefinitions.AmountOperator)"",""uuid"":""2bc2fbd3-8ba0-42fa-82a2-186d96695bd8"",""value"":""GREATER_THAN_OR_EQUAL""},""products"":{""type"":""List(ItemType(Product))"",""uuid"":""b5a259e7-3ca9-4b90-8dec-8fec881c0c43"",""value"":[""3881014""]}},""definitionId"":""y_qualifying_products""}],""parameters"":{""id"":{""type"":""java.lang.String"",""uuid"":""087e3e06-65e2-435b-aae6-cd53ea701b4b"",""value"":""container_y""}},""definitionId"":""y_container""},{""children"":[{""children"":[],""parameters"":{""quantity"":{""type"":""java.lang.Integer"",""uuid"":""cc2f5d43-aab4-4668-a2da-8d4f52a4d886"",""value"":1},""operator"":{""type"":""Enum(de.hybris.platform.ruledefinitions.AmountOperator)"",""uuid"":""080b98d0-d5db-4db4-aa1d-9d345e099ae2"",""value"":""GREATER_THAN_OR_EQUAL""},""products"":{""type"":""List(ItemType(Product))"",""uuid"":""52036986-3035-4cfc-bab9-98682bd4cc57"",""value"":[""2116266""]}},""definitionId"":""y_qualifying_products""}],""parameters"":{""id"":{""type"":""java.lang.String"",""uuid"":""394dc38b-9cba-490d-ac09-3a940521c406"",""value"":""container_z""}},""definitionId"":""y_container""},{""children"":[{""children"":[],""parameters"":{""quantity"":{""type"":""java.lang.Integer"",""uuid"":""a8a1e4e1-a85f-4630-a966-01c2d3fafdf0"",""value"":1},""operator"":{""type"":""Enum(de.hybris.platform.ruledefinitions.AmountOperator)"",""uuid"":""ef2aeafd-900f-40a4-9e88-28f9069c1dc6"",""value"":""GREATER_THAN_OR_EQUAL""},""products"":{""type"":""List(ItemType(Product))"",""uuid"":""df427ae1-7ce7-4120-b88b-c1d8ee24ed4e"",""value"":[""3794514""]}},""definitionId"":""y_qualifying_products""}],""parameters"":{""id"":{""type"":""java.lang.String"",""uuid"":""8fdc6a0a-a462-446a-bf8b-10eca4b2679a"",""value"":""container_x""}},""definitionId"":""y_container""}]";"[{""parameters"":{""selection_strategy"":{""type"":""Enum(de.hybris.platform.ruleengineservices.enums.OrderEntrySelectionStrategy)"",""uuid"":""2d080fd6-b41e-42ae-ac85-c8954554910a"",""value"":""CHEAPEST""},""value"":{""type"":""Map(ItemType(Currency),java.math.BigDecimal)"",""uuid"":""750675bc-00f5-4bbb-b139-b184069bb6b5"",""value"":{""USD"":55}},""qualifying_containers"":{""type"":""Map(java.lang.String,java.lang.Integer)"",""uuid"":""45cb4072-558b-436b-a33a-f3a388017263"",""value"":{""container_x"":1,""container_y"":1,""container_z"":1}}},""definitionId"":""y_target_bundle_price""}]";;
;product_price_threshold_fixed_discount;100;1;productPromotionRuleGroup;"[{""definitionId"":""y_product_price"",""parameters"":{""value"":{""uuid"":""2052faba-2215-481e-9fe3-8abbdae94669"",""type"":""Map(ItemType(Currency),java.math.BigDecimal)"",""value"":{""USD"":750}},""operator"":{""uuid"":""0043b8f6-0628-495a-8409-ff0d8c941dda"",""type"":""Enum(de.hybris.platform.ruledefinitions.AmountOperator)"",""value"":""GREATER_THAN_OR_EQUAL""}},""children"":[]}]";"[{""definitionId"":""y_order_entry_fixed_discount"",""parameters"":{""value"":{""uuid"":""069007c1-2528-4a1d-80ec-8e44977e86e8"",""type"":""Map(ItemType(Currency),java.math.BigDecimal)"",""value"":{""USD"":50}}}}]";;
;coupon_code_percentage_discount;25;1;couponPromotionRuleGroup;"[{""definitionId"":""y_qualifying_coupons"",""parameters"":{""coupons"":{""uuid"":""e3288128-09d2-40ff-b3b5-66498c903e1ba"",""type"":""List(ItemType(AbstractCoupon))"",""value"":[""WINTER16""]}},""children"":[]}]";"[{""definitionId"":""y_order_percentage_discount"",""parameters"":{""value"":{""uuid"":""f48a0433-01a3-44c4-9c69-f67f872eca26"",""type"":""java.math.BigDecimal"",""value"":10}}}]"

############################# COUPON SAMPLE DATA ##########################
INSERT_UPDATE CodeGenerationConfiguration;name[unique=true];codeSeparator;
;default-configuration;-;

INSERT_UPDATE SingleCodeCoupon;couponId(id)[unique=true];maxRedemptionsPerCustomer;maxTotalRedemptions
;SUMMER69;1;10;
;FALL16;1;100;
;CHRISTMAS16;3;100;
;WINTER16;2;15;

INSERT_UPDATE MultiCodeCoupon;couponId(id)[unique=true];codeGenerationConfiguration(name)
;PROMO16;default-configuration
