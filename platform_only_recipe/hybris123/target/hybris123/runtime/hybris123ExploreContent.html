<html lang="en-us">
 <head> 
  <!--
  © 2017 SAP SE or an SAP affiliate company.  All rights reserved.
  Please see http://www.sap.com/corporate-en/legal/copyright/index.epx for additional trademark information and notices.
--> 
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-light/css/style.css"> 
  <link rel="stylesheet" type="text/css" href="style/mystyle.css"> 
  <script type="text/javascript" src="scripts/jquery.min.js"></script> 
  <script type="text/javascript" src="scripts/hybris123head.js"></script> 
  <script>
	$(document).ready(function() {
		checkSetup();
		swapSegments();
		setTimeout( function(){ 
			   showTrailHome(); 
			   setFFCommands();
			   setUpCopyPasteLogic();     
			}, 2000 );          
	});
  </script> 
 </head> 
 <body class="en-us sap-light centered navigation-default"> 
  <div id="onlyifsetupok"> 
   <div class="placeholder">   
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title1"><h1 class="title topictitle1">Version Control</h1></td> 
        <td class="titlearrows"><a href="#title0">▲</a> <a href="#title2" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">Version control systems are an essential part of any non-trivial software development project. The primary purpose of a version control system is to centrally track and store changes made to software as it is developed. </p> 
     <p class="p">As a developer, you will typically commit your changes several times a day, upon completing some small increment of work. These commits should be made only when your software is in a green state. Other developers in your team can then pull these changes from the version control system, thus allowing the team to efficiently share any changes. A version control system also allows you to roll your code back to an earlier commit, should you need to do so. </p> 
     <p class="p">In <span class="ph">SAP Commerce 123</span>, you will use the version control system Git to commit your code as you progress. This allows you to revert to a previously completed step, should you wish to do so. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a class="extlink" href="http://help.sap.com/disclaimer?site=https://git-scm.com/" target="_blank" alt="https://git-scm.com/" title="https://git-scm.com/">Git<img src="../images/themes/sap-hybris/img/3rd_link.png" class="link-external" alt="Information published on non-SAP site" title="Information published on non-SAP site" border="0"></a> 
     </div> 
    </div> 
    <table id="anchorrow1"> 
     <tbody> 
      <tr id="row1"> 
       <td id="row1"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio61819e484bca4acd8863533a3843eef0"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Set Up a Git Repository</h2></td> 
            <td id="copiersrow1"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Create a Git repository to which you will commit your code as you proceed through <span class="ph">SAP Commerce 123</span>. By committing your changes to Git, you can retrieve the code of previously completed steps should you need to do so. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_gitRepoOk&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_gitRepoOk"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#gitRepoOk test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#gitRepoOk test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Set up a Git repository in the folder <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris</span></span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git init"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git init"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">To limit the files saved to your Git repository, add a file named <span class="ph filepath">.gitignore</span> to the <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris</span> folder with the content:</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="hybris123gitignore"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the file yourself or you want to skip this step, move <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/.gitignore</span> into <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/.gitignore $HYBRIS_HOME_DIR/hybris"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="xcopy /h /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\.gitignore %HYBRIS_HOME_DIR%\hybris"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Make an initial commit to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Set Up a Git Repository&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Set Up a Git Repository&quot;"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run <samp class="ph codeph">git log</samp> and confirm that you see your first git commit listed.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="git log"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="git log"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_gitRepoOk"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#gitRepoOk test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#gitRepoOk test"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title2"><h1 class="title topictitle1">Installer Recipes</h1></td> 
        <td class="titlearrows"><a href="#title1">▲</a> <a href="#title3" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc"><span class="ph">SAP Commerce</span> ships with a set of pre-configured installation scripts, called installer recipes. Installer recipes simplify the installation and setup of <span class="ph">SAP Commerce</span> for development or demonstration purposes. </p> 
     <p class="p">Installer recipes create directories, move files, update properties and configuration settings, and initialize the system for a specific <span class="ph">SAP Commerce</span> configuration. With a single call to an installer recipe, you can configure, initialize, and run <span class="ph">SAP Commerce</span> in a number of variations, including the Accelerators, SAP integrations, or a minimal <span class="ph">SAP Commerce</span> platform-only configuration. </p> 
     <aside class="note note insertion"> 
      <span class="title">Note</span> Do not use the installer to run one recipe after another on the same 
      <span class="ph">SAP Commerce</span> setup. The installer does not uninstall recipes, and does not restore your 
      <span class="ph">SAP Commerce</span> file system to its original settings. To install another recipe, use the original 
      <span class="ph">SAP Commerce</span> files and directories. 
     </aside> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c46c266866910149666a0fe4caeee4e.html" title="To automate your installation of SAP Commerce for development and demonstration purposes, you can use an installer recipe. Recipes are gradle scripts that take care of creating directories, moving files, updating configuration and properties files, and initializing the system.">Installing SAP Commerce Using Installer Recipes</a> 
     </div> 
    </div> 
    <table id="anchorrow2"> 
     <tbody> 
      <tr id="row2"> 
       <td id="row2"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio4d4858a0115b40168dc577553cd55d00"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Install, Build, and Run SAP Commerce</h2></td> 
            <td id="copiersrow2"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Set Up a Git Repository' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack2">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Set Up a Git Repository"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack2">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Install <span class="ph">SAP Commerce</span> using the <span class="ph filepath">platform_only</span> recipe. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testSuiteIsOnline&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testSuiteIsOnline"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSuiteIsOnline test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSuiteIsOnline test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Navigate to <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;</span><span class="ph filepath">/installer</span> and install, build, and run <span class="ph">SAP Commerce</span> with the <span class="ph filepath">platform_only</span> recipe.</span> 
             <div class="itemgroup info"> 
              <p class="p">This may take up to 20 minutes.</p> 
             </div> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os multicmd"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
              </div> 
              <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/installer; ./install.sh -r platform_only setup"></q> 
              <q style="pass" class="xnix" cite="./install.sh -r platform_only initialize"></q> 
              <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              <div style="margin-bottom: 0;" class="os multicmd"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
              </div> 
              <q style="pass" class="windows" cite="rem setup and initialize hybris"></q> 
              <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\installer &amp; install.bat -r platform_only setup &amp; install.bat -r platform_only initialize"></q> 
              <q style="pass" class="windows" cite="rem setup tomcat as a windows service"></q> 
              <q style="pass" class="windows" cite="set _YWRAPPER_CONF=%HYBRIS_HOME_DIR%\hybris\bin\platform\tomcat\conf\wrapper.conf"></q> 
              <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform\tomcat\bin &amp; InstallTomCatService.bat"></q> 
              <q style="pass" class="windows" cite="rem start hybris"></q> 
              <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Wait for the server to start and then open the <span class="ph">SAP Commerce</span> backend at curl9002</span> 
             <div class="itemgroup stepresult"> 
              <p class="p">This opens the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>), the root web page in <span class="ph">SAP Commerce</span>. You can log in and explore the <span class="ph">Administration Console</span> using the default login (admin) and password (nimda). </p> 
              <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio4d4858a0115b40168dc577553cd55d00__fig_jqg_qvd_5z"> 
               <div class="figbody"> 
                <img xmlns="" class="inline  " id="loio4d4858a0115b40168dc577553cd55d00__image_z35_3wd_5z" src="../images/loiof58c65669c624566b28bd116a9f88dba_LowRes.png"> 
               </div> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testSuiteIsOnline"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSuiteIsOnline test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSuiteIsOnline test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Install, Build, and Run Hybris&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Install, Build, and Run Hybris&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title3"><h1 class="title topictitle1">Extensions</h1></td> 
        <td class="titlearrows"><a href="#title2">▲</a> <a href="#title4" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc"><span class="ph">SAP Commerce</span> has a modular architecture, where new business logic is developed in separate, function-specific modules called extensions. </p> 
     <p class="p">An extension is an encapsulated piece of <span class="ph">SAP Commerce</span> functionality, that can contain business logic, type definitions, a web application, and back-office configuration functionality. Depending on your business needs, your solution will have a varying number of extensions, all wired into the core <span class="ph">SAP Commerce</span> platform via the Spring dependency injection model. </p> 
     <p class="p"><span class="ph">SAP Commerce</span> ships with a number of extension templates, and an ant-based tool (called <span class="keyword apiname">extgen</span>) for generating new extensions based upon these templates. In this and subsequent sections, you extend <span class="ph">SAP Commerce</span> by adding and developing your own custom extension. </p> 
     <p class="p">For your Concert Tours project, you create a custom extension called <span class="keyword apiname yext">concerttours</span>. To begin, you create a default extension from a template. In later steps, you add the custom functionality that you require. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8bbf0b9d866910149688b8d696c8d47e.html" title="SAP Commerce has a flexible, modular architecture based on extensions. An extension is an encapsulated piece of software that extends SAP Commerce functionality by either modifying existing features, or introduction new features.">Extension Concept</a> 
     </div> 
    </div> 
    <table id="anchorrow3"> 
     <tbody> 
      <tr id="row3"> 
       <td id="row3"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loioe6faab8cd7954dc282b530a1f35752f5"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Create a New Extension</h2></td> 
            <td id="copiersrow3"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Install, Build, and Run SAP Commerce' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack3">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Install, Build, and Run SAP Commerce"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack3">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Create a new extension so you can start developing your own <span class="ph">SAP Commerce</span> functionalities. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testExtensionCreatedOk&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testExtensionCreatedOk"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testExtensionCreatedOk test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testExtensionCreatedOk test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Navigate into the <span class="ph">Platform</span> folder.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the <samp class="ph codeph">setantenv</samp> command to configure the Ant build tool delivered with <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite=". ./setantenv.sh"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="setantenv.bat"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Execute the Ant task <samp class="ph codeph">extgen</samp> to create a new empty <span class="ph">SAP Commerce</span> extension, with name <span class="keyword apiname yext">concerttours</span> and package <span class="keyword apiname">de.hybris.platform.concerttours</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ant extgen -Dinput.template=&quot;yempty&quot; -Dinput.name=&quot;concerttours&quot; -Dinput.package=&quot;concerttours&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="ant extgen -Dinput.template=&quot;yempty&quot; -Dinput.name=&quot;concerttours&quot; -Dinput.package=&quot;concerttours&quot;"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Ignore the steps that the ant command then prints in the console (for example <samp class="ph systemoutput">[echo] 1) Add your extension...</samp>), as these are given more explicitly below.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testExtensionCreatedOk"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testExtensionCreatedOk test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testExtensionCreatedOk test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Create a New Extension&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Create a New Extension&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title4"><h1 class="title topictitle1">The localextensions.xml File</h1></td> 
        <td class="titlearrows"><a href="#title3">▲</a> <a href="#title5" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">The <span class="ph filepath">localextensions.xml</span> file contains the list of extensions your specific <span class="ph">SAP Commerce</span> configuration includes at compile- and run-time. </p> 
     <p class="p">The default list of extensions found in this file is determined by the installer recipe you use. The minimal <span class="ph filepath">platform_only</span> recipe contains the shortest list of extensions. Other recipes, such as <span class="ph filepath">b2b_accelerator</span>, contain much longer lists, providing a richer functionality. </p> 
     <p class="p">To extend the business functionality of <span class="ph">SAP Commerce</span>, add other extensions to this list. You can add a combination of the extensions provided with <span class="ph">SAP Commerce</span>, and your own custom extensions. </p> 
     <p class="p">When you first build <span class="ph">SAP Commerce</span>, the <span class="ph filepath">localextensions.xml</span> file lists only the essential extensions. As you decide which extensions you need or want to use, add them to this file. In this procedure, you notify <span class="ph">SAP Commerce</span> of the new <span class="keyword apiname yext">concerttours</span> extension by adding it to the <span class="ph filepath">localextensions.xml</span> file. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8b8b1a3186691014a088ff4edd0c42f6.html" title="The localextensions.xml file allows you to configure the scope of extensions that you require in your SAP Commerce installation. There is no need to build a system with a full range of extensions if you are only planning to work with some. Reducing the extension scope speeds up the build process.">Installation Based on Specified Extensions</a> 
     </div> 
    </div> 
    <table id="anchorrow4"> 
     <tbody> 
      <tr id="row4"> 
       <td id="row4"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loioa0e4b005f872488fb1394c9d4ea91bde"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Add your Extension</h2></td> 
            <td id="copiersrow4"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Create a New Extension' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack4">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Create a New Extension"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack4">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Add the <span class="keyword apiname yext">concerttours</span> extension to the <span class="ph filepath">localextensions.xml</span> file and rebuild <span class="ph">SAP Commerce</span>. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_loginAndCheckForConcertToursExtension&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_loginAndCheckForConcertToursExtension"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#loginAndCheckForConcertToursExtension test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#loginAndCheckForConcertToursExtension test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Navigate to <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/config/localextensions.xml</span> and add <samp class="ph codeph">&lt;extension dir="../custom/concerttours"&gt;</samp> to the file.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="localextensionsexample.xml"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to update the <span class="ph filepath">localextensions.xml</span> file yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/config/localextensions.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/localextensions.xml</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/localextensions.xml $HYBRIS_HOME_DIR/hybris/config/localextensions.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\localextensions.xml %HYBRIS_HOME_DIR%\hybris\config\localextensions.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loioa0e4b005f872488fb1394c9d4ea91bde__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Log into the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>) at curl9002 using the login, admin, and the password, nimda.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Platform</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Extensions</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> or go directly to curl9002<span class="ph filepath">/platform/extensions</span>. </span> 
             <div class="itemgroup stepresult"> 
              <p class="p">This shows you an overview of the available extensions, as well as if any of those extensions include a core extension module, a webmodule and/or a core + extension module. </p> 
              <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loioa0e4b005f872488fb1394c9d4ea91bde__fig_ymy_3wc_wz"> 
               <div class="figbody"> 
                <img xmlns="" class="inline  " id="loioa0e4b005f872488fb1394c9d4ea91bde__image_i5q_qyc_wz" src="../images/loioc4a649d6cc26485180c0896acfe773b2_LowRes.png"> 
               </div> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_loginAndCheckForConcertToursExtension"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#loginAndCheckForConcertToursExtension test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#loginAndCheckForConcertToursExtension test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Add your Extension&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Add your Extension&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title5"><h1 class="title topictitle1">Data Models</h1></td> 
        <td class="titlearrows"><a href="#title4">▲</a> <a href="#title6" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">The data model underlying <span class="ph">SAP Commerce</span> is defined in XML files. New data types for extensions, called item types, are defined in <span class="ph filepath">&lt;extension-name&gt;-items.xml</span> files. </p> 
     <p class="p">New functionality you add to <span class="ph">SAP Commerce</span> may require additions to the <span class="ph">SAP Commerce</span> data model. For example, you need bands, tours, and concerts items to model the Little Concert company’s business requirements. </p> 
     <p class="p">The <span class="ph filepath">core-items.xml</span> file contains the basic definitions of the most fundamental item types and relations provided and used by the platform. These include definitions for different kinds of users, orders, and products, among other entities. </p> 
     <p class="p">If an extension contributes new item types, extend existing item types, modify relationships, or add relationships to the overall data model, it must do so in a file named <span class="ph filepath">&lt;extension-name&gt;-items.xml</span>, located in its own top-level resource directory. </p> 
     <p class="p"><span class="ph">SAP Commerce</span> refers to data types as itemtypes, each defined in an itemtype XML element. You define a new item type by adding a new <span class="keyword apiname">itemType</span> element to the<span class="ph filepath">&lt;extension-name&gt;-items.xml</span> file. Similarly, <span class="ph">SAP Commerce</span> refers to a one-to-many and many-to-many relationship between itemtypes as a relation, and you define new relations by adding a relation XML element to the <span class="ph filepath">&lt;extension-name&gt;-items.xml</span> file. </p> 
     <p class="p">At build time and database-initialization time, the platform combines all the XML declarations from the extensions being used, and generates Java classes and a database schema. </p> 
     <p class="p">For the little concert tours online shop, you represent each concert tour as a base product and each concert within a tour as a variant of a base product. You also extend the core data model to handle a few additional requirements: </p> 
     <ul class="ul"> 
      <li class="li">each concert tour must be associated with a hashtag for social media marketing purposes, so you need to add a string attribute to the Product item type for this </li> 
      <li class="li">each concert needs a venue and date associated with them, so you will create a sub-type that extends the VariantProduct item type with these attributes </li> 
      <li class="li">each concert can be held either outside or indoors so you will create an enumeration that you can use to indicate this </li> 
      <li class="li">the bands giving the concerts need to be represented in the data model so you will define a new item type, Band, to do this and a new relation between the Product and Band item types. </li> 
      <li class="li">you want to tag bands with the types of music they play so you will create another enumeration to provide this </li> 
     </ul> 
     <p class="p">The following diagram demonstrates the new data model. The yellow items are what you need to add. </p> 
     <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio8407430d63e443e2be463c20bac2f4c4__fig_bxd_g4h_mz"> 
      <div class="figbody"> 
       <img xmlns="" class="inline  " id="loio8407430d63e443e2be463c20bac2f4c4__image_ad1_db3_mz" src="../images/loiod50464020d124884ab56ae9a2ae59ce3_LowRes.png"> 
      </div> 
     </div> 
     <aside class="note note insertion"> 
      <span class="title">Note</span> You don't define any values here for the 
      <span class="keyword apiname">MusicType</span> enumeration because you will do that when you initialize the running system. If you did define some values for 
      <span class="keyword apiname">MusicType</span> here, then you would be stuck with them at runtime because, while you can remove any new values added at runtime, you cannot remove values that are defined in the 
      <span class="ph filepath">*-items.xml</span> files. 
     </aside> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c317a28866910149816b4a652470b16.html" title="Whenever you start developing and customizing SAP Commerce, you need to prepare a business model of your application. Here you will find help with setting up your business models.">Product and Data Modeling</a> 
     </div> 
    </div> 
    <table id="anchorrow5"> 
     <tbody> 
      <tr id="row5"> 
       <td id="row5"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio1963cccaa6e045a7a96602df4a732b7b"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Extend the Data Model</h2></td> 
            <td id="copiersrow5"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Add your Extension' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack5">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Add your Extension"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack5">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Extend the <span class="ph">SAP Commerce</span> data model by declaring new data types and relations, and extending data types declared by other extensions. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testExtensionModelOk&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testExtensionModelOk"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testExtensionModelOk test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testExtensionModelOk test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Update the data model in the <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-items.xml</span> file.</span> 
             <ol type="a" class="ol substeps" id="loio1963cccaa6e045a7a96602df4a732b7b__substeps_ikz_np3_wz"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Within the <span class="keyword apiname">itemtypes</span> tags, add a new attribute to an existing type, making sure to set the autocreate attribute to false here because you are adding to an itemtype that is defined elsewhere.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="concerttours-items.xml_hashtag"></code-snippet> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Within the <span class="keyword apiname">itemtypes</span> tags, create a new type, making sure to set the autocreate attribute to true because you are creating a new itemtype.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="concerttours-items.xml_Band"></code-snippet> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">At the top of the <span class="keyword apiname">items</span> section, define two new enumerations.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="concerttours-items.xml_enum"></code-snippet> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Within the <span class="keyword apiname">itemtypes</span> tags, create a new type by extending another.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="concerttours-items.xml_concert"></code-snippet> 
               </div> </li> 
              <li class="li substep substepexpand"><span class="ph cmd">Beneath the <span class="keyword apiname">enumtypes</span> section, create two new relations.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="concerttours-items.xml_relations"></code-snippet> 
               </div> 
               <div class="itemgroup stepresult"> 
                <p class="p">The final file will look similar to the following <span class="ph filepath">concerttours-items.xml</span> file. </p> 
                <code-snippet id="concerttours-items.xml"></code-snippet> 
               </div> </li> 
             </ol> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to update the data model yourself or you want to skip these steps, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-items.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours-items.xml</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-items.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-items.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-items.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-items.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p">The <samp class="ph codeph">ant clean all</samp> command ensures that you first remove all the previously generated Java classes including any that are now no longer needed. </p> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testExtensionModelOk"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testExtensionModelOk test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testExtensionModelOk test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Extend the Data Model&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Extend the Data Model&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title6"><h1 class="title topictitle1">Database Design</h1></td> 
        <td class="titlearrows"><a href="#title5">▲</a> <a href="#title7" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc"><span class="ph">SAP Commerce</span> stores its data in a relational database. A large range of third-party databases are supported, allowing you to choose a database best suited to your solution. </p> 
     <p class="p">When you define a new data model, you must specify how that model is to be persisted in the database. Specifically, whether each new item type should be persisted in its own database table or in a parent table. When you define new item types, you can include a deployment XML attribute to specify the name of a new table specific to that type. If you do not include the deployment XML attribute in a new item type, <span class="ph">SAP Commerce</span> persists that item in the table used by the parent of the new type. </p> 
     <p class="p">For example, if you have not specified a deployment tag for the <span class="keyword apiname">Concert</span> item type, <span class="ph">SAP Commerce</span> stores items of that type in the same database table as items of the <span class="keyword apiname">VariantProduct</span> item type because you defined <span class="keyword apiname">Concert</span> as extending <span class="keyword apiname">VariantProduct</span>. The <span class="keyword apiname">VariantProduct</span> type does not have a deployment clause either, but it extends the <span class="keyword apiname">Product</span> item type, which does have a deployment clause. This means that items of <span class="keyword apiname">Concert</span>, <span class="keyword apiname">VariantProduct</span>, and <span class="keyword apiname">Product</span> are all stored in the same database table, which is called <span class="keyword apiname">Products</span>, as specified in the <span class="keyword apiname">Product</span> item type definition in <span class="ph filepath">core-items.xml</span>. This is generally what you want, because it makes it easy to search and retrieve subsets of all kinds of products. No database table joins are required. </p> 
     <p class="p">In contrast, you have not defined the <span class="keyword apiname">Band</span> item type as extending any other item type. Therefore, items of our <span class="keyword apiname">Band</span> item type will be stored in the table specified by the root item type called <span class="keyword apiname">GenericItem</span>. All types extend <span class="keyword apiname">GenericItem</span> unless specified otherwise. This is almost certainly not what you want, so when you are not specifically extending another item type, you should always include a deployment clause. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c755da8866910149c27ec908fc577ef.html" title="A type is a template for objects. Types define product data that objects may carry and specify relations between objects, and also make product data persistent by categorizing the data and relating it to database fields. Every object stored in Platform is a type instance.">The Type System</a> 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c71816186691014b734cf6c17d0ad0a.html" title="A wide variety of third-party databases may be used with SAP Commerce. This gives great flexibility, allowing you to choose a database best suited to your solution.">Third-Party Databases</a> 
     </div> 
    </div> 
    <table id="anchorrow6"> 
     <tbody> 
      <tr id="row6"> 
       <td id="row6"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loiob03a93936c7644e2920a26d960896b83"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Update the Database</h2></td> 
            <td id="copiersrow6"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Extend the Data Model' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack6">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Extend the Data Model"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack6">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Initiate a system update to reflect the changes that you made to the data model, and confirm that you have created the new <span class="keyword apiname">Band</span> table. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testDatabaseSetup&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testDatabaseSetup"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDatabaseSetup test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDatabaseSetup test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Update the database.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant updatesystem"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant updatesystem"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Open the database with the default hsqldb DatabaseManager.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; java -cp ./bin/platform/lib/dbdriver/hsqldb*.jar org.hsqldb.util.DatabaseManager --url jdbc:hsqldb:file:./data/hsqldb/mydb &amp;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; start /B java -cp .\bin\platform\lib\dbdriver\* org.hsqldb.util.DatabaseManager --url jdbc:hsqldb:file:.\data\hsqldb\mydb"></q> 
              </div> 
             </div> 
             <div class="itemgroup stepresult"> 
              <p class="p">There should be a new table called Bands. </p> 
              <aside class="note tip insertion"> 
               <span class="title">Tip</span> 
               <p class="p">When Hybris is running, you can also view the database in the <span class="ph">SAP Commerce Administration Cockpit</span> at curl9002 by going to<span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Monitoring</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Database</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">TableSize</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">CalculateTableSizes</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> and searching for BANDS in the list of tables found in the database. </p> 
              </aside> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Close the hsqldb DatabaseManager.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="pkill -f &quot;DatabaseManager&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="taskkill /FI &quot;WINDOWTITLE eq HSQL*&quot;"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testDatabaseSetup"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDatabaseSetup test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDatabaseSetup test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Update the Database&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Update the Database&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title7"><h1 class="title topictitle1">ImpEx</h1></td> 
        <td class="titlearrows"><a href="#title6">▲</a> <a href="#title8" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc"><span class="ph">SAP Commerce</span> ships with a powerful text-based import and export functionality called ImpEx. </p> 
     <p class="p">ImpEx files are essentially comma-separated files (CSVs) that allow for compact, human-readable, import and export of data to and from <span class="ph">SAP Commerce</span>. They can be manually executed through the <span class="ph">SAP Commerce Administration Console</span>, or automatically executed every time you initialize the system by saving the ImpEx file according to a simple convention, and in a specific location. </p> 
     <p class="p">The <span class="ph">SAP Commerce Administration Console</span> provides an interface, in the <span class="ph uicontrol">Impex Import</span> tab of the <span class="ph uicontrol">Console</span>, through which you can manually import small amounts of ImpEx data. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8bf2b22c866910149c44c1374a1a47f2.html" title="SAP Commerce is shipped with a text-based import and export functionality called ImpEx. The ImpEx engine allows creating, updating, removing and exporting platform items such as customer, product or order data to and from comma-separated value (CSV) data files, both during run time and during the initialization or update process.">Impex</a> 
     </div> 
    </div> 
    <table id="anchorrow7"> 
     <tbody> 
      <tr id="row7"> 
       <td id="row7"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loioa8fcc35efe03458092423c91aa07ac0c"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Load Data Through the Administration Console</h2></td> 
            <td id="copiersrow7"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Update the Database' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack7">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Update the Database"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack7">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Import your Band and Group data using the <span class="ph">SAP Commerce Administration Console</span>. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testManualImpex&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testManualImpex"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testManualImpex test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testManualImpex test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Import some bands and groups.</span> 
             <ol type="a" class="ol substeps" id="loioa8fcc35efe03458092423c91aa07ac0c__substeps_iq2_4js_xz"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Log into the <span class="ph">SAP Commerce Administration Console</span> at curl9002 using the login admin and the password nimda.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Go to the <span class="ph uicontrol">Console</span> tab and select the <span class="ph uicontrol">ImpEx Import</span> option.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">The <span class="ph uicontrol">Impex Import</span> page appears. </p> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Copy and paste the following text into the <span class="ph uicontrol">Import content</span> text box.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="essentialdata-bands.impex"></code-snippet> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click the <span class="ph uicontrol">Validate Content</span> button to execute some basic syntax checking of the content.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">A message appears above <span class="ph uicontrol">Import content</span> box confirming that the content is valid. </p> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click the <span class="ph uicontrol">Import Content</span> button to launch the import.</span> </li> 
             </ol> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to import the bands and groups data yourself or you want to skip this step, run the following command. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#simulateManualImpex test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#simulateManualImpex test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Confirm that the import was successful.</span> 
             <ol type="a" class="ol substeps" id="loioa8fcc35efe03458092423c91aa07ac0c__substeps_yr1_sms_xz"> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph">SAP Commerce Administration Console</span>, go the <span class="ph uicontrol">Console</span> tab and select the <span class="ph uicontrol">FlexibleSearch</span> option.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">The <span class="ph uicontrol">FlexibleSearch</span> page appears. </p> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Retrieve all the Band data items from the database by entering the query <samp class="ph codeph">select {pk},{code},{history} from {Band}</samp> into the <span class="ph uicontrol">FlexibleSearch</span> query text box, and click the <span class="ph uicontrol">Execute</span> button. </span> 
               <div class="itemgroup info"> 
                <aside class="note tip insertion"> 
                 <span class="title">Tip</span> 
                 <p class="p">You could also click on the <span class="ph uicontrol">All products</span> link in the <span class="ph uicontrol">Query Samples</span> box on the right of the page, and replace the <samp class="ph codeph">name[de]</samp> attribute with <samp class="ph codeph">history</samp> and <samp class="ph codeph">Product</samp> with <samp class="ph codeph">Band</samp> in the contents of the query that appear. </p> 
                </aside> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Check that the imported Band data items are all present and correct in the <span class="ph uicontrol">Search results</span> tab.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">The Band data items are listed in the search results with a PK (primary key) attribute that is added for each item by the <span class="ph">SAP Commerce</span> persistence engine upon import. </p> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testManualImpex"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testManualImpex test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testManualImpex test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Load Data Through the HAC&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Load Data Through the HAC&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title8"><h1 class="title topictitle1">Essential and Project Data by Convention </h1></td> 
        <td class="titlearrows"><a href="#title7">▲</a> <a href="#title9" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">You can prepare ImpEx files containing essential and project data that the system imports on initialization. This functionality follows the Convention over Configuration principle (CoC). </p> 
     <p class="p">Using ImpEx to import data through the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>) is useful for adhoc imports, but not for repeatedly loading large amounts of ImpEx content every time you initialize or update the database. To automatically load this data, you can place your ImpEx in text files in the <span class="ph filepath">/resources/impex</span> directory of your extension. A naming convention then ensures that <span class="ph">SAP Commerce</span> automatically loads them as part of the initialization or update process. </p> 
     <p class="p">Impex files fall into two categories: those describing essential data, and those describing project or product data. </p> 
     <dl class="dl"> 
      <dt class="dt dlterm emphasis">
        Essential data ImpEx file 
      </dt> 
      <dd class="dd">
        Contains fundamental reference data that is required by your extension. Essential data is always imported when you initialize the platform with your extension. Essential data ImpEx files have names in the form 
       <span class="ph filepath">essentialdata*.impex</span>. 
      </dd> 
      <dt class="dt dlterm emphasis">
        Project data ImpEx file 
      </dt> 
      <dd class="dd">
        Contains data that is optional your extension, such as sample data. Project data is included only when you check the project data checkbox for your extension in the 
       <span class="ph">Administration Console</span> during initialization. Project data ImpEx files have names in the form 
       <span class="ph filepath">projectdata*.impex</span>. 
      </dd> 
     </dl> 
     <p class="p">If there are multiple files found that fit the naming convention, <span class="ph">SAP Commerce</span> loads and processes them in an unspecified order. If the order is important, one simple solution is to create a single file meeting the naming convention. You then use the ImpEx include feature to include the content from the other files in the required order, and rename the included files so they no longer fit the naming convention. </p> 
     <p class="p">In this example, the ImpEx files are deliberately designed to separate all the content for each tour into a separate file, and use <samp class="ph codeph">INSERT_UPDATE</samp> commands. Therefore, if there are many tours and concerts to import, then the order in which the files are processed is not important. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8beedbec8669101491c4a5cd1ffc4465.html" title="The Convention over Configuration principle is adopted in SAP Commerce to simplify and reduce the need for writing configuration files. As a result, ImpEx files for essential data and project data can be prepared without the need for additional data configuration.">ImpEx Import for Essential and Project Data</a> 
     </div> 
    </div> 
    <table id="anchorrow8"> 
     <tbody> 
      <tr id="row8"> 
       <td id="row8"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio79bae518d51d49aabd4624906ae125fc"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Import Essential Data into Your Data Model</h2></td> 
            <td id="copiersrow8"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Load Data Through the Administration Console' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack8">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Load Data Through the Administration Console"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack8">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Use ImpEx to set up essential and project data for your extension.</p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testCoCImpex&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testCoCImpex"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testCoCImpex test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testCoCImpex test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the <span class="ph filepath">essentialdata-bands.impex</span> and <span class="ph filepath">projectdata-yBandTour.impex</span> files in <span class="ph filepath">&lt;HYBRIS_BIN_DIR&gt;/custom/concerttours/resources/impex</span></span> 
             <ol type="a" class="ol substeps"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Create the essential data ImpEx file.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="essentialdata-bands.impex"></code-snippet> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Create the project data ImpEx file.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="projectdata-yBandTour.impex"></code-snippet> 
               </div> </li> 
             </ol> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the ImpEx files yourself or you want to skip these steps, copy <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/impex/*.impex</span> into <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/impex/</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/impex/essentialdata-bands.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/essentialdata-bands.impex; ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/impex/projectdata-yBandTour.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/projectdata-yBandTour.impex"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\impex\*.impex %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Re-initialize the database using the <span class="ph">SAP Commerce Administration Console</span>. </span> 
             <ol type="a" class="ol substeps" id="loio79bae518d51d49aabd4624906ae125fc__substeps_fqj_2pf_xz"> 
              <li class="li substep"> <span class="ph cmd">Position the cursor over the <span class="ph uicontrol">Platform</span> tab to display the sub-menu, and then click on the <span class="ph uicontrol">Initialization</span> option, to take you to curl9002<span class="ph filepath">/platform/init</span></span> </li> 
              <li class="li substep"> <span class="ph cmd">In the <span class="ph uicontrol">Project data</span> settings area, ensure that all the check boxes are seleced.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Press one of the <span class="ph uicontrol">Initialize</span> buttons.</span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Check the log file to see if both files were processed without errors.</span> 
             <ol type="a" class="ol substeps" id="loio79bae518d51d49aabd4624906ae125fc__substeps_ik5_4pf_xz"> 
              <li class="li substep"> <span class="ph cmd">Open the latest console log file in the <span class="ph filepath">/hybris/log/tomcat</span> directory with a plain text editor or a log file browsing tool.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Locate in the log file where the two ImpEx files were processed and confirm that no errors were reported for the imports.</span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Check that the imports were successful by using the <span class="ph">Administration Console</span> FlexibleSearch console to run some queries and confirm that the data from both files was imported correctly.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testCoCImpex"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testCoCImpex test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testCoCImpex test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Import Essential Data into Your Data Model&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Import Essential Data into Your Data Model&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title9"><h1 class="title topictitle1">Essential and Project Data by Code</h1></td> 
        <td class="titlearrows"><a href="#title8">▲</a> <a href="#title10" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">You can hook into the system initialization and update process to load project data during platform initialization. </p> 
     <p class="p">After some consideration, you decide that band data is not really essential data and should be loaded as project data. Essential data is reserved for data that the system cannot work without. For this reason, move your band data out of essential data and set it up as project data instead. While the results are not exciting, all your code still works if there are no bands stored in the database. </p> 
     <p class="p">As your project data may grow significantly and become more complex, you can take the sophisticated approach of hooking into the initialization and update process. </p> 
     <p class="p">Your simple Java class uses the ImpEx service layer API to explicitly load your two ImpEx files. The main work is done in the <span class="keyword apiname">impexImport</span> method. You set up an <span class="keyword apiname">ImportConfig</span> object with various import options, including the name of the file you want to import. You then supply it as a parameter to the <span class="keyword apiname">importData</span> call. The system checks the resulting <span class="keyword apiname">ImportResult</span> for errors. </p> 
     <p class="p">The code also demonstrates the logging facilities that are built in to the platform.</p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8bcb3edb86691014af58b7162c06e1d5.html" title="You may use the @SystemSetup annotation in any ServiceLayer class to hook ServiceLayer code into the SAP Commerce initialization and update life-cycle events. In this way you can provide a means for creating essential and project data for any extension.">Hooks for Initialization and Update Process</a> 
     </div> 
    </div> 
    <table id="anchorrow9"> 
     <tbody> 
      <tr id="row9"> 
       <td id="row9"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio0d9906f26e45446a86925657ed153bba"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Hook into the Initialization and Update Process</h2></td> 
            <td id="copiersrow9"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Import Essential Data into Your Data Model' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack9">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Import Essential Data into Your Data Model"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack9">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Create one or more Java classes to hook into the initialization/update process and use the Impex ServiceLayer API to manipulate and load your data. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testHookImpex&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testHookImpex"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testHookImpex test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testHookImpex test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rename <span class="ph filepath">essentialdata-bands.impex</span> to <span class="ph filepath">concerttours-bands.impex</span> and rename <span class="ph filepath">projectdata-yBandTour.impex</span> to <span class="ph filepath">concerttours-yBandTour.impex</span> to ensure that the files are no longer being loaded by convention.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="mv $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/essentialdata-bands.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/concerttours-bands.impex; mv $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/projectdata-yBandTour.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/concerttours-yBandTour.impex"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="move %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\essentialdata-bands.impex %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\concerttours-bands.impex &amp; move %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\projectdata-yBandTour.impex %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\concerttours-yBandTour.impex"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a setup class called <span class="ph filepath">ConcerttoursCustomSetup.java</span> in your <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/setup</span> folder.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">The following code uses annotations at class and method level to hook the class into the initialization/update process and to indicate where in that process particular methods should be invoked. For example, the SystemSetup annotation on the <span class="keyword apiname">putInMyEssentialData()</span> method has a type attribute to specify that the method should be called as part of the essential data loading phase of the initialization/update process. </p> 
              <code-snippet id="concerttours.setup.ConcerttoursCustomSetup"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create a <span class="keyword apiname">ConcerttoursCustomSetup</span> setup class in the <span class="ph filepath">concerttours.setup</span> package or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/setup/ConcerttoursCustomSetup.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/setup/ConcerttoursCustomSetup.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/setup/ConcerttoursCustomSetup.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/setup/ConcerttoursCustomSetup.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\setup\ConcerttoursCustomSetup.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\setup\ConcerttoursCustomSetup.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Register this class as a Spring bean in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="injectingConcerttoursCustomSetup"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to register the class as a Spring bean or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withCustomSetup.xml</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withCustomSetup.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-spring.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-spring-withCustomSetup.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-spring.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loio0d9906f26e45446a86925657ed153bba__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Reinitialize in the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>).</span> 
             <ol type="a" class="ol substeps"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Log into the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>) at curl9002 using the login, admin, and the password, nimda.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Platform</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Initialization</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> or go directly to curl9002<span class="ph filepath">/platform/init</span>. </span></li> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph uicontrol">Project data settings</span> area ensure all the check boxes are selected.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click the <span class="ph uicontrol">Initialize</span> button.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio0d9906f26e45446a86925657ed153bba__fig_ztr_zhr_d1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loio0d9906f26e45446a86925657ed153bba__image_jk5_p3r_d1b" src="../images/loio77e5aae699004029bc82955abc34c386_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">In the console output or the console log file in the <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/tomcat</span> directory, locate the output produced by <span class="keyword apiname">ConcerttoursCustomSetup</span> to confirm that the new class was used.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testHookImpex"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testHookImpex test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testHookImpex test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Hook into the Initialization and Update Process&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Hook into the Initialization and Update Process&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title10"><h1 class="title topictitle1">Essential and Project Data by Convention and Code</h1></td> 
        <td class="titlearrows"><a href="#title9">▲</a> <a href="#title11" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc"><span class="ph">SAP Commerce</span> looks for and loads data from ImpEx files that follow a specific naming convention. This behaviour supports the convention over configuration software design paradigm. </p> 
     <p class="p"> Any ImpEx files that follow the <span class="ph">SAP Commerce</span> naming convention are automatically loaded whenever you initialize the system. You can use this to set up essential data that your extension needs to run. You can also optionally provide some initial data such as sample data, or initial values in a categories table for example, that the system also loads for convenience. The latter data type is known as project data. </p> 
     <p class="p">The naming convention for these two data types is as follows:</p> 
     <ul class="ul" id="loio3a70c2daa401490ea3a303771511c987__ul_xml_k4q_n1b"> 
      <li class="li"><span class="ph filepath">essentialdata-*.impex</span></li> 
      <li class="li"><span class="ph filepath">projectdata-*.impex</span></li> 
     </ul> 
     <p class="p">In each case, the <span class="ph emphasis emphasis">*</span> can be any name you choose, but it is convential to use your project name or data type. </p> 
    </div> 
    <table id="anchorrow10"> 
     <tbody> 
      <tr id="row10"> 
       <td id="row10"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio4896533dbf9244e1a60c0bca7c4ed0ce"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Use The Naming Convention to Load Data</h2></td> 
            <td id="copiersrow10"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Hook into the Initialization and Update Process' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack10">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Hook into the Initialization and Update Process"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack10">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Create two ImpEx files using the <span class="ph">SAP Commerce</span> ImpEx naming convention to load project data to tags your bands with the type of music they output. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testHookAndCoC&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testHookAndCoC"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testHookAndCoC test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testHookAndCoC test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create two ImpEx files: <span class="ph filepath">projectdata-musictypes.impex</span> and <span class="ph filepath">essentialdata-musictypes.impex</span> in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/impex/</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="projectdata-musictypes.impex"></code-snippet> 
             </div> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="essentialdata-musictypes.impex"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the ImpEx files or you want to skip this step, move <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/impex/hookwithcoc/*.impex</span> into <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/impex/</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/impex/hookwithcoc/*.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\impex\hookwithcoc\*.impex %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Reinitialize in the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>)</span> 
             <ol type="a" class="ol substeps"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Log into the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>) at curl9002 using the login, admin, and the password, nimda.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Platform</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Initialization</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> or go directly to curl9002<span class="ph filepath">/platform/init</span>. </span></li> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph uicontrol">Project data settings</span> area ensure all the check boxes are selected.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click the <span class="ph uicontrol">Initialize</span> button.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio4896533dbf9244e1a60c0bca7c4ed0ce__fig_ztr_zhr_d1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loio4896533dbf9244e1a60c0bca7c4ed0ce__image_jk5_p3r_d1b" src="../images/loio77e5aae699004029bc82955abc34c386_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">In the console output or the console log file in the <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/tomcat</span> directory, locate the output produced by <span class="keyword apiname">ConcerttoursCustomSetup</span> to confirm that the new class was used.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testHookAndCoC"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testHookAndCoC test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testHookAndCoC test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Use The Naming Convention to Load Data&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Use The Naming Convention to Load Data&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title11"><h1 class="title topictitle1">The ServiceLayer</h1></td> 
        <td class="titlearrows"><a href="#title10">▲</a> <a href="#title12" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">When implementing new business logic, you separate the business code into java classes called services. Each service implements a specific, well-defined requirement. </p> 
     <p class="p">Services form part of the <span class="keyword apiname">ServiceLayer</span>. This layer is a logical tier between the client and persistence layer. Each service has its own java interface that lists the public methods that can be called by clients and other services. </p> 
     <p class="p">A service may contain all required business logic, but more commonly will delegate to one or more of the following: </p> 
     <ul class="ul"> 
      <li class="li">Other services providing part of the behavior required</li> 
      <li class="li">Strategy objects that provide swappable behavior for different requirements, e.g. different cart calculation algorithms </li> 
      <li class="li">Data access objects that handle locating and retrieving data items from the database</li> 
     </ul> 
     <p class="p">These other services, strategy objects and data access objects are also defined as Spring beans, with respective interfaces and implementations. </p> 
     <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loioec3d78f39a1444a0b7d9db6ca503b8df__fig_mvm_qlm_xz"> 
      <div class="figbody"> 
       <img xmlns="" class="inline  " id="loioec3d78f39a1444a0b7d9db6ca503b8df__image_mpy_rmm_xz" src="../images/loioaf38a1e3198548ad9e03ff2aa585fcd0_LowRes.png"> 
      </div> 
     </div> 
     <p class="p">To build your service, you create the following files in the <span class="ph filepath">src</span> folder of the <span class="keyword apiname yext">concerttours</span> extension: </p> 
     <ul class="ul" id="loioec3d78f39a1444a0b7d9db6ca503b8df__ul_alj_nkz_n1b"> 
      <li class="li"><span class="keyword apiname">BandDAO</span>: The DAO interface, which describes the CRUD functionality that you require, in this case only read functionality. </li> 
      <li class="li"><span class="keyword apiname">DefaultBandDAO</span>: The DAO implementation </li> 
      <li class="li"><span class="keyword apiname">BandService</span>: The band service interface </li> 
      <li class="li"><span class="keyword apiname">DefaultBandService</span>: The band service implementation </li> 
     </ul> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c5a6a5986691014a65ee480c04c7b28.html" title="The SAP Commerce ServiceLayer is an API for developing services for SAP Commerce. It provides a number of common services, while allowing you to extend these or develop your own.">ServiceLayer</a> 
     </div> 
    </div> 
    <table id="anchorrow11"> 
     <tbody> 
      <tr id="row11"> 
       <td id="row11"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio8befe2d7137a4fa192258864482d87db"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Extend the ServiceLayer</h2></td> 
            <td id="copiersrow11"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Use The Naming Convention to Load Data' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack11">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Use The Naming Convention to Load Data"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack11">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Add new functionality to your extension to list and find Bands by adding a new service interface, service implementation, and supporting DAOs. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testServiceLayerClassesExist&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testServiceLayerClassesExist"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerClassesExist test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerClassesExist test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a new <span class="keyword apiname">BandDAO</span> DAO interface under the <span class="keyword apiname yext">concerttours</span> extension's <span class="ph filepath">src/concerttours/daos</span> folder. </span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.daos.BandDAO"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <ul class="ul" id="loio8befe2d7137a4fa192258864482d87db__ul_o4s_52f_xz"> 
               <li class="li">The interface consists of methods required by the test <span class="ph filepath">DefaultBandDAOIntegrationTest.java</span>. </li> 
               <li class="li">The comments describe the behavior for both success and failure of each method. </li> 
               <li class="li">You do not need a <span class="keyword apiname">save</span> method. The saving mechanism is done by <span class="keyword apiname">modelService</span>. </li> 
               <li class="li"><span class="keyword apiname">findBandsByCode</span> returns a list, but because you have set <samp class="ph codeph">unique=true</samp> in <span class="ph filepath">items.xml</span>, the list will have either 1 or 0 elements. </li> 
              </ul> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create a new DAO interface yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/daos/BandDAO.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/daos/BandDAO.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/daos/BandDAO.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/daos/BandDAO.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\daos\BandDAO.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\daos\BandDAO.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the <span class="keyword apiname">DefaultBandDAO</span> DAO implementation under the <span class="ph filepath">src/concerttours/daos/impl</span> folder of the <span class="keyword apiname yext">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.daos.impl.DefaultBandDAO"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <ul class="ul" id="loio8befe2d7137a4fa192258864482d87db__ul_qwq_y2f_xz"> 
               <li class="li">The DAO uses <span class="ph">SAP Commerce</span> Flexible Search Query to construct its queries. The <span class="keyword apiname">DefaultBandDAO</span> class uses the <span class="ph">SAP Commerce</span> Flexible Search Query for the queries. If you want to persist new Band items in the DAO, use the <span class="keyword apiname">save</span> method of the model service. However, as shown in the diagram in the introduction, you can call the model service <span class="keyword apiname">save</span> method in the service class instead. </li> 
               <li class="li">By separating the DAO logic into its own POJO, it is easier to test and clearer to develop. </li> 
               <li class="li">At the top of the <span class="keyword apiname">DefaultBandDAO</span> class, there is an annotation that is provided by the Spring framework: <samp class="ph codeph">@Component (value = "bandDAO")</samp>. This annotation tells Spring to define a bean, an instance of this class, called <span class="keyword apiname">bandDAO</span> that it can use for wiring dependencies. However, you need to tell Spring that it should scan this package to look for annotation-defined beans. To do so, add a <samp class="ph codeph">context:component-scan</samp> tag to the application context. </li> 
              </ul> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the DAO implementation yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/daos/impl/DefaultBandDAO.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/daos/impl/DefaultBandDAO.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/daos/impl/DefaultBandDAO.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/daos/impl/DefaultBandDAO.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\daos\impl\DefaultBandDAO.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\daos\impl\DefaultBandDAO.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"><span class="ph cmd">Create the <span class="keyword apiname">BandService</span> band service interface under the <span class="ph filepath">src/concerttours/service</span> folder of the <span class="keyword apiname yext">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.service.BandService"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the band service interface yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/service/BandService.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/service/BandService.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/service/BandService.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/service/BandService.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\service\BandService.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\service\BandService.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the <span class="keyword apiname">DefaultBandService</span> band service implementation under the <span class="ph filepath">src/concerttours/service/impl </span> folder of the <span class="keyword apiname yext">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.service.impl.DefaultBandService"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the band service implementation yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/service/impl/DefaultBandService.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/service/impl/DefaultBandService.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/service/impl/DefaultBandService.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/service/impl/DefaultBandService.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\service\impl\DefaultBandService.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\service\impl\DefaultBandService.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Configure Spring to register the DAO and <span class="keyword apiname">DefaultBandService</span> as Spring beans in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="enablingComponentScan"></code-snippet> 
              <code-snippet id="injectingDefaultBandService"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to register the DAO and <span class="keyword apiname">DefaultBandService</span> yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring.xml</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-spring.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-spring.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-spring.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loio8befe2d7137a4fa192258864482d87db__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testServiceLayerClassesExist"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerClassesExist test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerClassesExist test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Extend the ServiceLayer&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Extend the ServiceLayer&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title12"><h1 class="title topictitle1">Integration Tests</h1></td> 
        <td class="titlearrows"><a href="#title11">▲</a> <a href="#title13" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">Integration tests are essential for demonstrating that your new functionality works as expected. They notify you when you break existing behavior, and can therefore help reduce bugs. </p> 
     <p class="p">Create an integration test that tests and demonstrates some of the following expected behavior of your DAO: </p> 
     <ul class="ul" id="loio91d6433b78ba47e59ddc1794917e269e__ul_xr5_ftk_n1b"> 
      <li class="li">Calling the <span class="keyword apiname">findBands</span> method and what it should return when it does and does not find data </li> 
      <li class="li">Calling the <span class="keyword apiname">findBands(String code)</span> method and what it should return when it does and does not find data. </li> 
      <li class="li">Persisting a Band</li> 
     </ul> 
     <p class="p">A typical integration test tests a wide range of possibilities. You could expand the test to demonstrate and test that the method succeeds correctly when the parameters are within range, and also that the method fails correctly, and gracefully, when the parameters are out of range. Your test parameters could include any or all of the following: </p> 
     <ul class="ul" id="loio91d6433b78ba47e59ddc1794917e269e__ul_yr5_ftk_n1b"> 
      <li class="li">An incorrect upper and lower case combination</li> 
      <li class="li">A null value</li> 
      <li class="li">An empty string</li> 
      <li class="li">A space, or invalid characters</li> 
     </ul> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8bec615d86691014887ca1b28c882bef.html" title="With the Testweb front end you can execute one or more tests or test suites. This can be done on a running system, especially when there is no ant environment from which to execute such tests.">The SAP Commerce Testweb Front End</a> 
     </div> 
    </div> 
    <table id="anchorrow12"> 
     <tbody> 
      <tr id="row12"> 
       <td id="row12"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loiobea896a2b89a4260a50667fa1c163dcb"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Test Your Service</h2></td> 
            <td id="copiersrow12"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Extend the ServiceLayer' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack12">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Extend the ServiceLayer"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack12">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Create an integration test for your new service, then run it and view the test results. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testServiceLayerIntegrationTest&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testServiceLayerIntegrationTest"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerIntegrationTest test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerIntegrationTest test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the <span class="ph filepath">DefaultBandDAOIntegrationTest.java</span> DAO integration test in <span class="ph filepath">concerttours\testsrc\daos\impl</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.daos.impl.DefaultBandDAOIntegrationTest"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the test class yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/daos/impl/DefaultBandDAOIntegrationTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/daos/impl/DefaultBandDAOIntegrationTest.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/daos/impl/DefaultBandDAOIntegrationTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/daos/impl/DefaultBandDAOIntegrationTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\daos\impl\DefaultBandDAOIntegrationTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\daos\impl\DefaultBandDAOIntegrationTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a second integration test to test the BandService by creating a test class called <span class="ph filepath">concerttours.service.impl.DefaultBandServiceIntegrationTest</span> under the <span class="ph filepath">testsrc</span> folder of the <span class="keyword apiname yext">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.service.impl.DefaultBandServiceIntegrationTest"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the test class yourself or you want to skip this step, replace <span class="ph filepath"> &lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceIntegrationTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceIntegrationTest.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceIntegrationTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceIntegrationTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\service\impl\DefaultBandServiceIntegrationTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\service\impl\DefaultBandServiceIntegrationTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loiobea896a2b89a4260a50667fa1c163dcb__d67e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Initialize your test tenant.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant yunitinit"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant yunitinit"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the integration tests and confirm that both new integration tests pass.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">View the test results at <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/junit/index.html</span></span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testServiceLayerIntegrationTest"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerIntegrationTest test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerIntegrationTest test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Test Your Service&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Test Your Service&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title13"><h1 class="title topictitle1">Unit Tests</h1></td> 
        <td class="titlearrows"><a href="#title12">▲</a> <a href="#title14" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">You can simulate dependencies to execute unit tests that run independently of the <span class="ph">SAP Commerce</span> platform. </p> 
     <p class="p">An integration test demonstrates that you have successfully achieved the expected behavior of classes that implement the <span class="keyword apiname">BandService</span> interface. However it is not truly testing the expected functionality of your particular <span class="keyword apiname">DefaultBandService</span> class. To do that you should mock up the dependencies, the <span class="keyword apiname">BandDAO</span> in this case, using Mockito in a new unit test class called <span class="keyword apiname">DefaultBandServiceUnitTest</span>. As this simulates a real DAO, the test requires no access to the <span class="ph">SAP Commerce</span> persistence layer, and therefore does not need to extend <span class="keyword apiname">ServicelayerTransactionalTest</span>. Instead it is a simple POJO and will run very quickly. </p> 
     <p class="p">You will test that the expected calls are made from the <span class="keyword apiname">BandService</span> to the <span class="keyword apiname">BandDAO</span> interface. No implementation of the <span class="keyword apiname">BandDAO</span> is needed when simulating the <span class="keyword apiname">BandDAO</span> interface. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c63621986691014a7e0a18695d7d410.html" title="SAP Commerce integrates the Spring Framework, offering developers a familiar and flexible programming model. The Spring Framework is the foundation of the SAP Commerce Service Layer.">Spring Framework in SAP Commerce</a> 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c5a3f0b86691014ba52a4ef46e4fa29.html" title="We provide a series of procedures covering various aspects of the ServiceLayer. Use these procedures to get you started quickly with common ServiceLayer user cases.">Working with the ServiceLayer</a> 
     </div> 
    </div> 
    <table id="anchorrow13"> 
     <tbody> 
      <tr id="row13"> 
       <td id="row13"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio0e9700db4a41482fb440a0a4f4270f4d"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Test Your New Service with a Unit Test</h2></td> 
            <td id="copiersrow13"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Test Your Service' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack13">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Test Your Service"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack13">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Use Mockito to create a simulation of the <span class="keyword apiname">BandDAO</span> implementation that the service would usually use. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testServiceLayerUnitTest&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testServiceLayerUnitTest"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerUnitTest test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerUnitTest test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the new <span class="ph filepath">DefaultBandServiceUnitTest.java</span> unit test class in <span class="ph filepath">testsrc/concerttours/service/impl</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.service.impl.DefaultBandServiceUnitTest"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the <span class="keyword apiname">DefaultBandServiceUnitTest.java</span> unit test class or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceUnitTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceUnitTest.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceUnitTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceUnitTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\service\impl\DefaultBandServiceUnitTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\service\impl\DefaultBandServiceUnitTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loio0e9700db4a41482fb440a0a4f4270f4d__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the unit test.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant unittests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant unittests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">View the test results at <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/junit/index.html</span></span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testServiceLayerUnitTest"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerUnitTest test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testServiceLayerUnitTest test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Test Your New Service with a Unit Test&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Test Your New Service with a Unit Test&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title14"><h1 class="title topictitle1">The Facade Layer</h1></td> 
        <td class="titlearrows"><a href="#title13">▲</a> <a href="#title15" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">A facade is an abstraction layer that provides a simplified interface to the underlying implementation. </p> 
     <p class="p">In previous sections, you saw that <span class="ph">SAP Commerce</span> generates Java model classes that represent the different types of item that are stored in the database. These model classes are what you pass as arguments to the different Java services in the <span class="ph">SAP Commerce</span> service layer. Nevertheless, there are occasions when the model classes become unwieldy: </p> 
     <ul class="ul" id="loio3984c622893b425eb323600d6128526f__ul_tz5_rpx_31b"> 
      <li class="li">When you need a simpler or more convenient format for some of the data to display in JSPs </li> 
      <li class="li">When you need a serializable set of objects to send to another system</li> 
      <li class="li">When you want to prevent client code from modifying attributes in a model class object directly </li> 
     </ul> 
     <p class="p">In these cases, you need a simpler representation of the data in the model classes. This representation is the purpose of the Data Transfer Object. In addition, if there is a common sequence of method calls that a client must make against a service object, it makes sense to combine the sequence into one call. You make these simplified calls with a facade object. </p> 
     <p class="p">Facade classes help simplify the calls made to your service classes. They use simpler plain old java objects (POJOs) as argument and result objects, instead of <span class="ph">SAP Commerce</span> model classes. In this step, you create a new <span class="keyword apiname">BandFacade</span> class. </p> 
    </div> 
    <table id="anchorrow14"> 
     <tbody> 
      <tr id="row14"> 
       <td id="row14"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loiodda3671356244090baf52b0a04a0e39f"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Extend The Facade Layer</h2></td> 
            <td id="copiersrow14"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Test Your New Service with a Unit Test' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack14">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Test Your New Service with a Unit Test"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack14">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Create facade classes that provide a simplified interface to your extension logic. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testFacadeLayerOk&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testFacadeLayerOk"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testFacadeLayerOk test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testFacadeLayerOk test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Declare the data transfer objects in <span class="ph filepath">concerttours-beans.xml</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">Add the following to the <span class="ph filepath">concerttours-beans.xml</span> file in the concerttours extension's resources folder. </p> 
              <code-snippet id="concerttours-beans.xml_facadelayer"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p">You are defining beans and enumerations in an XML file that a code generator takes as input. The main advantage of this method is that you can merge attributes over several extensions into the same DTO in the same way that item type definitions are combined from across multiple <span class="ph filepath">items.xml</span> files. This makes your facade layer more extensible. </p> 
              <aside class="note note insertion"> 
               <span class="title">Note</span> 
               <ul class="ul" id="loiodda3671356244090baf52b0a04a0e39f__ul_wty_2qb_31b"> 
                <li class="li">You create a summary DTO for tours that simply comprises an id, name and number of concerts. You can use this in pages where you need to list tours, or otherwise display brief details of a tour. </li> 
                <li class="li">In the <span class="keyword apiname">BandData</span> beans, you use Java generics to constrain the types of objects returned within the lists of related genres and tours. </li> 
                <li class="li">In the <span class="keyword apiname">TourData</span> beans, you are referencing the <span class="keyword apiname">ConcertSummaryData</span> beans you defined just before it in the file. </li> 
               </ul> 
              </aside> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the <span class="ph filepath">concerttours-beans.xml</span> file yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-beans.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-beansWithFacadeLayer.xml</span>. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-beansWithFacadeLayer.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-beans.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-beansWithFacadeLayer.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-beans.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the new DTOs from this XML definition by calling <span class="keyword cmdname">ant clean all</span> from the <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/platform</span> directory.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p">The ant command generates model and DTO classes in the <span class="ph filepath">platform/bootstrap/gensrc</span> directory. When complete, take a look at the newly-created data transfer object classes: <span class="keyword apiname">BandData</span>, <span class="keyword apiname">TourData</span>Create, <span class="keyword apiname">ConcertSummaryData</span> and <span class="keyword apiname">TourSummaryData</span>. </p> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the Band and Tour facade interfaces in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/facades/</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.facades.BandFacade"></code-snippet> 
              <code-snippet id="concerttours.facades.TourFacade"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p">Just like <span class="ph">SAP Commerce</span> services, facades are created as Spring beans that implement a particular Java interface. The purpose of these facades is to provide a business-level API of use to the calling clients. In this case they retrieve details on Bands and Tours. </p> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the facade interfaces yourself or you want to skip this step, copy <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/*Facade.java</span> to <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/facades/</span>. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/TourFacade.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/facades/TourFacade.java; ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/BandFacade.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/facades/BandFacade.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\facades\*Facade.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\facades\"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the Band and Tour facade implementations in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/facades/impl/</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.facades.impl.DefaultBandFacade"></code-snippet> 
              <code-snippet id="concerttours.facades.impl.DefaultTourFacade"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p">The facade implementions make calls to services in the ServiceLayer, specifically <span class="keyword apiname">BandService</span> and <span class="keyword apiname">ProductService</span> to provide the required functionality. </p> 
              <aside class="note note insertion"> 
               <span class="title">Note</span> Note that you hardcode the population of the data transfer objects from model objects. For simple scenarios, this approach is perfectly fine. Nevertheless, for more complex scenarios, the 
               <span class="ph">SAP Commerce</span> platform has the notion of convertors. Converters are objects that delegate this task to a chain of populator objects. For more details, see 
               <a class="xref" href="https://help.hybris.com/1811/hcd/8b937ff886691014815fcd31ff1de47a.html" title="Data objects are constructed from Models or other Service Layer objects using Converters and Populators. Converters create new instances of Data objects and call Populators to populate these.">Converters and Populators</a>. 
              </aside> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the facade implementations yourself or you want to skip this step, copy <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/impl/DefaultBandFacade.java</span> and <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/impl/DefaultTourFacade.java</span> to the <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/facades/impl/</span> directory. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/impl/DefaultBandFacade.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/facades/impl/DefaultBandFacade.java; ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/impl/DefaultTourFacade.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/facades/impl/DefaultTourFacade.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\facades\impl\*Facade.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\facades\impl\"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Declare the facades in <span class="ph filepath">concerttours-spring.xml</span> so that they are wired in to your extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="injectingDefaultBandFacade"></code-snippet> 
              <code-snippet id="injectingDefaultTourFacade"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withFacade.xml</span>. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withFacade.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-spring.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-spring-withFacade.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-spring.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the facades integration test in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">It is good practice to write a test that can verify the correct behavior of your facade implementations. </p> 
              <code-snippet id="concerttours.facades.impl.DefaultBandFacadeIntegrationTest"></code-snippet> 
              <aside class="note note insertion"> 
               <span class="title">Note</span> 
               <ul class="ul" id="loiodda3671356244090baf52b0a04a0e39f__ul_pyh_rcc_31b"> 
                <li class="li">Annotate the class with <samp class="ph codeph">@IntegrationTest</samp> so that it can be picked up by the built-in ant testing targets, and extend <span class="keyword apiname">ServicelayerTransactionalTest</span> so that the <span class="ph">SAP Commerce</span> environment is started up and available during the running of the test. </li> 
                <li class="li">Use the <span class="keyword apiname">ModelService</span> to create new instances of model classes so that the new objects are already attached to the persistence context. If you used the standard Java new operator, you would have to explicitly attach the object to the persistence context before saving it. </li> 
               </ul> 
              </aside> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the integration test yourself or you want to skip this step, copy <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationTest.java</span> to the <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/</span> directory. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\facades\impl\DefaultBandFacadeIntegrationTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\facades\impl\"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a unit test in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/</span> for testing <span class="keyword apiname">DefaultBandFacade</span> in isolation.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">Name the test class <span class="keyword apiname">DefaultBandFacadeUnitTest</span>, and save it in the <span class="ph filepath">concerttours.facades.impl</span> package under the <span class="ph filepath">testsrc</span> folder of the <span class="keyword apiname">concerttours</span> extension. </p> 
              <code-snippet id="concerttours.facades.impl.DefaultBandFacadeUnitTest"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the unit test yourself or you want to skip this step, copy <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeUnitTest.java</span> to the <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/</span> directory. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeUnitTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeUnitTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\facades\impl\DefaultBandFacadeUnitTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\facades\impl\"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loiodda3671356244090baf52b0a04a0e39f__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the tests and confirm that they pass.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ant alltests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="ant alltests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">View the test results at <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/junit/index.html</span> and confirm you see <span class="keyword apiname">DefaultBandFacadeIntegrationTest</span>.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testFacadeLayerOk"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testFacadeLayerOk test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testFacadeLayerOk test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Extend The Facade Layer&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Extend The Facade Layer&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title15"><h1 class="title topictitle1">The Front End</h1></td> 
        <td class="titlearrows"><a href="#title14">▲</a> <a href="#title16" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">Once you have a model and business logic in place, you can develop a suitable front-end web application. When building your front end, use the Spring MVC framework to separate the model, the view, and the controller parts. </p> 
     <p class="p"><span class="ph">SAP Commerce</span> provides a range of Accelerator storefronts. The Accelerators give you basic building blocks that you can use for developing sophisticated and responsive storefronts within specific commerce domains. But to illustrate the basics of how stores are constructed, you focus here on two aspects. </p> 
     <dl class="dl"> 
      <dt class="dt dlterm emphasis">
        The Controller Class 
      </dt> 
      <dd class="dd">
        The interface between the user action and the underlying model. 
      </dd> 
      <dt class="dt dlterm emphasis">
        JSP Pages 
      </dt> 
      <dd class="dd">
        Dynamic web pages for presenting data to the end user. 
      </dd> 
     </dl> 
     <p class="p">You have previously created the <span class="ph emphasis emphasis">model</span> aspect of your MVC architecture, now you create the <span class="ph emphasis emphasis">view</span>, the JSP pages, and the <span class="ph emphasis emphasis">controller, the controller class.</span></p> 
    </div> 
    <table id="anchorrow15"> 
     <tbody> 
      <tr id="row15"> 
       <td id="row15"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loioe44483ca4a434989ad0228a968b9cf20"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Build a Web App Component Using Spring MVC</h2></td> 
            <td id="copiersrow15"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Extend The Facade Layer' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack15">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Extend The Facade Layer"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack15">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Develop a simple front-end store and get the basics for understanding how stores are constructed. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testWebAppComponent&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testWebAppComponent"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testWebAppComponent test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testWebAppComponent test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create two new controller classes called <span class="keyword apiname">concerttours.controller.BandController</span> and <span class="keyword apiname">concerttours.controller.TourController</span> under the <span class="ph filepath">web/src</span> folder in the <span class="keyword apiname yext">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.daos.BandController"></code-snippet> 
              <code-snippet id="concerttours.daos.TourController"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p">You use several Annotations in these classes. The <samp class="ph codeph">@Controller</samp> annotation tells Spring to handle the created Class as a Spring Controller component. </p> 
              <p class="p">In <span class="keyword apiname">BandController</span>, you can see two methods that are annotated using the <samp class="ph codeph">@RequestMapping</samp> annotation. This maps the paths <span class="ph filepath">/bands</span> and <span class="ph filepath">/band/{bandcode}</span> to the <span class="keyword apiname">Controller</span> methods. While the first method, the <span class="keyword apiname">showBands</span> method, is straightforward, the <span class="keyword apiname">showBandDetails</span> method also declares <samp class="ph codeph">@PathVariable</samp>. The <samp class="ph codeph">bandId</samp> parameter is automatically resolved by Spring. Both methods return simple Strings which will be picked up by the <span class="keyword apiname">ViewResolver</span> you declared. A returned String <samp class="ph systemoutput">hello</samp> would therefore be mapped to <span class="ph filepath">WEB-INF/views/hello.jsp</span> according to the setup. </p> 
              <p class="p">To clearly separate the View from the Model part, populate the passed Model object with the data you would like to retrieve in the view. Either the List of <span class="keyword apiname">BandData</span> or a single <span class="keyword apiname">BandData</span> instance will be part of the model passed to the View. </p> 
              <p class="p">You need to set the session catalog because flexible search constrains any search for catalog-aware items to catalogs listed in the session object. </p> 
              <p class="p">The <span class="keyword apiname">TourController</span> class is coded similarly. </p> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the classes or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/controller</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/controller</span>. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/controller/BandController.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/controller/BandController.java; ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/controller/TourController.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/controller/TourController.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo d | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\controller %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\controller"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the <span class="ph filepath">BandList.jsp</span>, <span class="ph filepath">BandDetails.jsp</span>, and <span class="ph filepath">TourDetails.jsp</span> files in <span class="ph filepath">web/webroot/WEB-INF/views</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="BandList.jsp"></code-snippet> 
              <code-snippet id="BandDetails.jsp"></code-snippet> 
              <code-snippet id="TourDetails.jsp"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the List and JSP pages or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/web/webroot/WEB-INF/views</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/web/webroot/WEB-INF/views</span>. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="mkdir -p $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/web/webroot/WEB-INF/views; cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/web/webroot/WEB-INF/views/* $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/web/webroot/WEB-INF/views"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo d | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\web\webroot\WEB-INF\views %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\web\webroot\WEB-INF\views"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loioe44483ca4a434989ad0228a968b9cf20__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Navigate to curl9002<span class="ph filepath">/concerttours/bands</span> and view the list of bands. You are now able to view the list of Bands as well as details on individual Bands, and details of their tours. Note that you don't have to restart the server if you create new or modify existing jsp pages. This can be very helpful in speeding up the development of your front end.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testWebAppComponent"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testWebAppComponent test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testWebAppComponent test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Build a Web App Component Using Spring MVC&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Build a Web App Component Using Spring MVC&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title16"><h1 class="title topictitle1">Dynamic Attributes</h1></td> 
        <td class="titlearrows"><a href="#title15">▲</a> <a href="#title17" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">Dynamic attributes enable you to add attributes to your model, and to create custom logic for them, without touching the model class itself. They provide a way to generate new data, and access it without calling a separate service to do so. Dynamic attributes are transient data that is not persisted to the database. </p> 
     <p class="p">All the attributes you have defined so far for your <span class="keyword apiname">Band</span> items are simply stored and retrieved without any extra business logic involved. You use the getter and setter methods of the corresponding Java model class to access and modify them. However, you can also dynamically compute values for an item and expose those values through the getter and setter methods. There are many reasons you may wish to do so: </p> 
     <ul class="ul" id="loiod9b3c27bdede40839799918d432990d8__ul_vx1_c3q_n1b"> 
      <li class="li">You may want to expose a value in a different set of units. For example, you may need to represent a point on a map as both polar and cartesian coordinates, a time in both 12 hour and 24 hour form, or a relative and absolute version of a directory path or URL. </li> 
      <li class="li">You may want to calculate a value from several attributes of an item. For example, you may want to calculate the distance between two attributes that hold a location, add the values of a number of attributes together such as price, tax, and discount in an order item to provide a subtotal, or determine the age of a person from a date of birth attribute and the current date. </li> 
     </ul> 
     <p class="p">To provide the custom logic for a dynamic attribute of an item type, you need to provide read and write logic depending upon the requirements for that attribute. You cannot add that logic directly to the model classes because they are already generated, and anything you add would be overwritten and lost the next time you rebuilt the system. Instead, write a plain Java class that implements the <span class="keyword apiname">DynamicAttributeHandler</span> interface. This interface makes use of Java generics so that the actual class reflects both the attribute value type ( in this case <span class="keyword apiname">java.lang.Long</span> ) and the model class it works upon (in this case <span class="keyword apiname">Concert</span>). You then declare this handler class as a Spring bean. </p> 
     <p class="p">For this trail you create a new attribute called <span class="keyword apiname">Concerts.daysLeft</span> that exposes the dynamically calculated number of days left before a concert is due to be held. This value can then be used for displaying a countdown to the concert date on a web page, for example. </p> 
     <p class="p">The implementation of this new dynamic attribute has some key features:</p> 
     <ul class="ul" id="loiod9b3c27bdede40839799918d432990d8__ul_qxk_fkz_21b"> 
      <li class="li">The persistence type is set to dynamic</li> 
      <li class="li">The persistence <span class="keyword apiname">attributeHandler</span> points to a bean that must handle the <span class="keyword apiname">DynamicAttributeHandler</span> interface </li> 
      <li class="li">The <span class="keyword apiname">write</span> attribute is set to false, and therefore the attribute is read-only </li> 
     </ul> 
    </div> 
    <table id="anchorrow16"> 
     <tbody> 
      <tr id="row16"> 
       <td id="row16"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio5b631e31042a474bbb2d4b3ed7bd6e3d"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Introduce a Dynamic Attribute</h2></td> 
            <td id="copiersrow16"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Build a Web App Component Using Spring MVC' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack16">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Build a Web App Component Using Spring MVC"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack16">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Create the <span class="keyword apiname">Concerts.daysLeft</span> dynamic attribute. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testDynamicAttributeUnitTest&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testDynamicAttributeUnitTest"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeUnitTest test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeUnitTest test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Define a new dynamic attribute handler within the Concert itemtype in the <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-items.xml</span> file.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours-items.xml_dynamicattributes"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to define a new dynamic attribute yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-items.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithDynamicAttributes.xml</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithDynamicAttributes.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-items.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-itemsWithDynamicAttributes.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-items.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Define an attribute handler in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/attributehandlers/ConcertDaysUntilAttributeHandler.java</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.attributehandlers.ConcertDaysUntilAttributeHandler"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to define the attribute handler yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/attributehandlers/ConcertDaysUntilAttributeHandler.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/attributehandlers/ConcertDaysUntilAttributeHandler.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/attributehandlers/ConcertDaysUntilAttributeHandler.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/attributehandlers/ConcertDaysUntilAttributeHandler.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\attributehandlers\ConcertDaysUntilAttributeHandler.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\attributehandlers\ConcertDaysUntilAttributeHandler.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Register the attribute handler in Spring in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="injectingConcertDaysUntilAttributeHandler"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to define the attribute handler yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withAttributeHandler.xml</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withAttributeHandler.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-spring.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-spring-withAttributeHandler.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-spring.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a unit test to confirm correct behavior in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/attributehandlers/ConcertDaysUntilAttributeHandlerUnitTest.java</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.attributehandlers.ConcertDaysUntilAttributeHandlerUnitTest"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the unit test yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/attributehandlers/ConcertDaysUntilAttributeHandlerUnitTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/attributehandlers/ConcertDaysUntilAttributeHandlerUnitTest.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/attributehandlers/ConcertDaysUntilAttributeHandlerUnitTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/attributehandlers/ConcertDaysUntilAttributeHandlerUnitTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\attributehandlers\ConcertDaysUntilAttributeHandlerUnitTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\attributehandlers\ConcertDaysUntilAttributeHandlerUnitTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loio5b631e31042a474bbb2d4b3ed7bd6e3d__d67e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Update <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant updatesystem"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant updatesystem"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the unit test.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant unittests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant unittests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">View the test results at <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/junit/index.html</span> and confirm that this unit test has passed.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testDynamicAttributeUnitTest"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeUnitTest test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeUnitTest test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Introduce a Dynamic Attribute&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Introduce a Dynamic Attribute&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title17"><h1 class="title topictitle1">Dynamic Attributes Integration</h1></td> 
        <td class="titlearrows"><a href="#title16">▲</a> <a href="#title18" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">It is good practice to always run an integration test when introducing new features, to test your new classes in context. </p> 
     <p class="p">You previously ran a unit test to test the basic logic of your new dynamic attribute class. Now write an integration test to put it through its paces. You want to provide the class with some real time data, and also test the robustness of the class with future, past, and empty date values. Use the <span class="keyword apiname">modelService</span>, to ensure that the result is in the form of an extended item model, as expected. </p> 
    </div> 
    <table id="anchorrow17"> 
     <tbody> 
      <tr id="row17"> 
       <td id="row17"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio49c79a3bc8ab4352a79e716644a380d4"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Test Dynamic Attributes Integration</h2></td> 
            <td id="copiersrow17"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Introduce a Dynamic Attribute' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack17">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Introduce a Dynamic Attribute"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack17">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Create and run an integration test to ensure the handler is picked up properly as a Spring bean. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testDynamicAttributeIntegrationTest&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testDynamicAttributeIntegrationTest"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeIntegrationTest test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeIntegrationTest test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the Integration Test:</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.attributehandlers.ConcertDaysUntilAttributeHandlerIntegrationTest"></code-snippet> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the test class yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/attributehandlers/ConcertDaysUntilAttributeHandlerIntegrationTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/attributehandlers/ConcertDaysUntilAttributeHandlerIntegrationTest.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/attributehandlers/ConcertDaysUntilAttributeHandlerIntegrationTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/attributehandlers/ConcertDaysUntilAttributeHandlerIntegrationTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\attributehandlers\ConcertDaysUntilAttributeHandlerIntegrationTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\attributehandlers\ConcertDaysUntilAttributeHandlerIntegrationTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loio49c79a3bc8ab4352a79e716644a380d4__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Initialize your test tenant.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant yunitinit"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant yunitinit"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the integration tests and confirm that both new integration tests pass.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">View the test results at <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/junit/index.html</span> and confirm <span class="keyword apiname">ConcertDaysUntilAttributeHandlerIntegrationTest</span> has passed.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testDynamicAttributeIntegrationTest"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeIntegrationTest test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeIntegrationTest test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Test Dynamic Attributes Integration&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Test Dynamic Attributes Integration&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title18"><h1 class="title topictitle1">Web Page Update</h1></td> 
        <td class="titlearrows"><a href="#title17">▲</a> <a href="#title19" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">Update the relevant parts of your extension to use the new dynamic attribute. </p> 
     <p class="p">After introducing new item attributes, you want to apply them. In this case, you want to display the days left until a concert value in the tour details page. To do so, you need to update your <span class="keyword apiname">TourFacade</span>, <span class="ph filepath">TourDetails.jsp</span> page, and the <span class="keyword apiname">ConcertSummaryData</span> class so that the calculated value of the dynamic attribute <span class="keyword apiname">Concerts.daysLeft</span> appears in the front end. </p> 
    </div> 
    <table id="anchorrow18"> 
     <tbody> 
      <tr id="row18"> 
       <td id="row18"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loioffd3abd48a464f2ba1c71ec778dda8f3"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Update Web Page to Include New Dynamic Attribute</h2></td> 
            <td id="copiersrow18"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Test Dynamic Attributes Integration' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack18">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Test Dynamic Attributes Integration"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack18">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Add handling for the <span class="keyword apiname">Concerts.daysLeft</span> attribute, and display it on the <span class="ph emphasis emphasis">Tour Details</span> page of your web application. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testDynamicAttributeView&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testDynamicAttributeView"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeView test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeView test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Update the bean definition to include the new dynamic attribute in <span class="ph filepath">concerttours-beans.xml</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours-beans.xml_dynamicattributes"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to update the bean definition yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-beans.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-beansWithDynamicAttributes.xml</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-beansWithDynamicAttributes.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-beans.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-beansWithDynamicAttributes.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-beans.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Update the default tour facade implementation to include setting the new dynamic attribute.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.facades.impl.DefaultTourFacadeWithDynamicAttributes"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to update the default tour facade implementation yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/facades/impl/DefaultTourFacade.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/impl/DefaultTourFacadeWithDynamicAttributes.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/impl/DefaultTourFacadeWithDynamicAttributes.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/facades/impl/DefaultTourFacade.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\facades\impl\DefaultTourFacadeWithDynamicAttributes.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\facades\impl\DefaultTourFacade.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Update the view page.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="TourDetailsWithDynamicAttributes.jsp"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to update the view page yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/web/webroot/WEB-INF/views/TourDetails.jsp</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/web/webroot/WEB-INF/views/TourDetailsWithDynamicAttributes.jsp </span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/web/webroot/WEB-INF/views/TourDetailsWithDynamicAttributes.jsp $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/web/webroot/WEB-INF/views/TourDetails.jsp"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\web\webroot\WEB-INF\views\TourDetailsWithDynamicAttributes.jsp %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\web\webroot\WEB-INF\views\TourDetails.jsp"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loioffd3abd48a464f2ba1c71ec778dda8f3__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Navigate to curl9002/<span class="ph filepath">concerttours/bands</span> and view the list of bands.</span> 
             <div class="itemgroup stepresult"> 
              <p class="p">Each tour now shows a <span class="ph uicontrol">Days Until</span> value, which gives the number of days until that tour takes place. </p> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testDynamicAttributeView"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeView test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testDynamicAttributeView test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Update Web Page to Include New Dynamic Attribute&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Update Web Page to Include New Dynamic Attribute&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title19"><h1 class="title topictitle1">Events and Listeners</h1></td> 
        <td class="titlearrows"><a href="#title18">▲</a> <a href="#title20" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">The Event System is a framework provided by the <span class="keyword apiname">ServiceLayer</span> that allows you to send and receive events within <span class="ph">SAP Commerce</span>. </p> 
     <p class="p">You can set up components of your extension to publish events that are then received by registered listeners. Listeners are objects that are notified of events and perform business logic depending on the event that occured. Events can be published either locally or across a cluster of nodes. You can register new listeners as Spring beans in your Spring configuration XML file. </p> 
     <p class="p">The platform defines and publishes events for a number of predefined types of event. These include the <span class="keyword apiname">AfterItemCreationEvent</span> type, items of which are published after any new data item is saved to the database. To process these <span class="keyword apiname">AfterItemCreationEvent</span> events, you provide a listener class and register it with the event framework. </p> 
     <p class="p">For your <span class="keyword apiname">concerttours</span> extension, you want to generate items of news that you can potentially send out to registered subscribers through various channels. You want to create a new <span class="keyword apiname">News</span> item whenever a new band is signed. In your listener class, you override the <span class="keyword apiname">onEvent</span> method to specify the code you want to execute when this event occurs. In this case, you are checking to see if the new item is a band. If it is, you ask the platform model service to create and save a new news item. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8bbbc04e866910149e93ca9faad254eb.html" title="The ServiceLayer provides a framework to send and receive events within SAP Commerce. Events can either be published locally or across cluster nodes.">Event System</a> 
     </div> 
    </div> 
    <table id="anchorrow19"> 
     <tbody> 
      <tr id="row19"> 
       <td id="row19"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio147d08d89e4f4b5fbe7eadd993383707"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Create a Listener</h2></td> 
            <td id="copiersrow19"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Update Web Page to Include New Dynamic Attribute' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack19">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Update Web Page to Include New Dynamic Attribute"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack19">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Write a listener class that creates a new <span class="keyword apiname">News</span> item when a new <span class="keyword apiname">Band</span> item is created and saved to the database. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testNewsEvents&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testNewsEvents"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testNewsEvents test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testNewsEvents test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Add a new itemtype called News to <span class="ph filepath">concerttours-items.xml</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours-items.xml_News"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the <span class="keyword apiname">News</span> itemtype or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-items.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithNews.xml</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithNews.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-items.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-itemsWithNews.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-items.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a listener class that listens for new Band events under the <span class="ph filepath">src</span> folder of the <span class="keyword apiname yext">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.events.NewBandEventListener"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the <span class="ph filepath">NewBandEventListener.java</span> listener class or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/events/NewBandEventListener.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/events/NewBandEventListener.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/events/NewBandEventListener.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/events/NewBandEventListener.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\events\NewBandEventListener.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\events\NewBandEventListener.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Register the new listener in Spring by adding the <span class="keyword apiname">concerttourEventListener</span> Spring bean definition to the <span class="ph filepath">concerttours-spring.xml</span> file in the <span class="ph filepath">resources</span> folder of the <span class="keyword apiname yext">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="injectingEventListener"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to add the <span class="ph filepath">concerttourEventListener</span> Spring bean or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/events/NewBandEventListener.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withListener.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-spring.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-spring-withListener.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-spring.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loio147d08d89e4f4b5fbe7eadd993383707__d67e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Reinitialize in the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>)</span> 
             <ol type="a" class="ol substeps"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Log into the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>) at curl9002 using the login, admin, and the password, nimda.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Platform</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Initialization</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> or go directly to curl9002<span class="ph filepath">/platform/init</span>. </span></li> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph uicontrol">Project data settings</span> area ensure all the check boxes are selected.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click the <span class="ph uicontrol">Initialize</span> button.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio147d08d89e4f4b5fbe7eadd993383707__fig_ztr_zhr_d1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loio147d08d89e4f4b5fbe7eadd993383707__image_jk5_p3r_d1b" src="../images/loio77e5aae699004029bc82955abc34c386_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Check that the news items were successfully created.</span> 
             <ol type="a" class="ol substeps" id="loio147d08d89e4f4b5fbe7eadd993383707__substeps_yr1_sms_xz2"> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph">SAP Commerce Administration Console</span>, go the <span class="ph uicontrol">Console</span> tab and select the <span class="ph uicontrol">FlexibleSearch</span> option.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">The <span class="ph uicontrol">FlexibleSearch</span> page appears. </p> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Retrieve all the News items from the database by entering the query <samp class="ph codeph">select {pk},{date}, {headline}, {content} from {News}</samp> into the <span class="ph uicontrol">FlexibleSearch</span> query text box and click the <span class="ph uicontrol">Execute</span> button. </span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testNewsEvents"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testNewsEvents test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testNewsEvents test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Create a Listener&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Create a Listener&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title20"><h1 class="title topictitle1">Custom Events and Interceptors</h1></td> 
        <td class="titlearrows"><a href="#title19">▲</a> <a href="#title21" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">Interceptors intercept model object lifecycle transitions and, depending on the conditions of that transition, may publish an event when they do so. </p> 
     <p class="p">Model classes represent <span class="ph">SAP Commerce</span> items. Each model contains all item attributes from all extensions, which unifies access to the data for an item. </p> 
     <p class="p">An interceptor addresses a particular step in the life cycle of a model. When the life cycle reaches a certain step, you can activate a corresponding interceptor. An interceptor can modify the model, raise an exception to interrupt the current step, or publish an event if the model matches certain criteria. For example, you could check that an attribute contains certain values before saving the model. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c146aa686691014bbf6fe76a708ece2.html" title="Models are a way to represent SAP Commerce items, whereby each of these items is represented by a Model class. Each Model contains all item attributes from all extensions thus unifying access to an item's data.">Models</a> 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8bfbf43e8669101480d0f060d79b1baa.html" title="Interceptors check whether constraints set for the behavior of life cycles of models are fulfilled. Use interceptors to make sure you delete or persist the correct data only, and that you handle data properly.">Interceptors</a> 
     </div> 
    </div> 
    <table id="anchorrow20"> 
     <tbody> 
      <tr id="row20"> 
       <td id="row20"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loiob7ece3d4b08c47378d92eaac3d626ae3"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Create a Custom Event</h2></td> 
            <td id="copiersrow20"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Create a Listener' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack20">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Create a Listener"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack20">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Create an interceptor that throws an exception if someone tries to save a <span class="keyword apiname">Band</span> item with negative album sales, and publishes a custom event if a band's album sales exceed a certain number. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testEventInterceptorIntegrationTest&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testEventInterceptorIntegrationTest"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testEventInterceptorIntegrationTest test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testEventInterceptorIntegrationTest test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a new event class.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.events.BandAlbumSalesEvent"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the event class or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/events/BandAlbumSalesEvent.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/events/BandAlbumSalesEvent.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/events/BandAlbumSalesEvent.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/events/BandAlbumSalesEvent.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\events\BandAlbumSalesEvent.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\events\BandAlbumSalesEvent.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create an interceptor for the custom event.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.interceptors.BandAlbumSalesInterceptor"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the interceptor or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/interceptors/BandAlbumSalesInterceptor.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/interceptors/BandAlbumSalesInterceptor.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/interceptors/BandAlbumSalesInterceptor.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/interceptors/BandAlbumSalesInterceptor.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\interceptors\BandAlbumSalesInterceptor.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\interceptors\BandAlbumSalesInterceptor.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create an event listener.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.events.BandAlbumSalesEventListener"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the event listener or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/events/BandAlbumSalesEventListener.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/events/BandAlbumSalesEventListener.java </span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/events/BandAlbumSalesEventListener.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/events/BandAlbumSalesEventListener.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\events\BandAlbumSalesEventListener.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\events\BandAlbumSalesEventListener.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Register the interceptor and the event listener.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="injectingInterceptor"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to register the interceptor and the event listener or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withInterceptor.xml </span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withInterceptor.xml  $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-spring.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-spring-withInterceptor.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-spring.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Write an integration test by creating a new test class, <span class="keyword apiname">BandAlbumSalesEventListenerIntegrationTest</span>, under the <span class="ph filepath">testsrc</span> folder of the <span class="keyword apiname yext">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.events.BandAlbumSalesEventListenerIntegrationTest"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to write the integration test or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/events/BandAlbumSalesEventListenerIntegrationTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/events/BandAlbumSalesEventListenerIntegrationTest.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/events/BandAlbumSalesEventListenerIntegrationTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/events/BandAlbumSalesEventListenerIntegrationTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\events\BandAlbumSalesEventListenerIntegrationTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\events\BandAlbumSalesEventListenerIntegrationTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loiob7ece3d4b08c47378d92eaac3d626ae3__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Initialize your test tenant.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant yunitinit"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant yunitinit"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the <span class="ph filepath">BandAlbumSalesEventListenerIntegrationTest</span> test and confirm that you see found 7 testclasse(s) in the log output.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">View the test results at <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/junit/index.html</span> and confirm that <span class="ph filepath">BandAlbumSalesEventListenerIntegrationTest</span> test has passed.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testEventInterceptorIntegrationTest"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testEventInterceptorIntegrationTest test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testEventInterceptorIntegrationTest test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Create a Custom Event&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Create a Custom Event&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title21"><h1 class="title topictitle1">Cluster-Aware Events</h1></td> 
        <td class="titlearrows"><a href="#title20">▲</a> <a href="#title22" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc"><span class="ph">SAP Commerce</span> supports cluster-aware events. Cluster-aware events enable the processing of events in separate threads, or on particular nodes of a cluster. </p> 
     <p class="p">By default, <span class="ph">SAP Commerce</span> processes all events synchronously. But synchronous messaging has some disadvantages: </p> 
     <ul class="ul" id="loioe339428f80b74b94bd1a320a9654f7c1__ul_x1z_v5r_n1b"> 
      <li class="li">The main thread waits until all events are processed. For example, a band is not saved until a corresponding news item is created. </li> 
      <li class="li">A slow listener can cause the system to throw a timeout exception.</li> 
     </ul> 
     <p class="p">In such circumstances, it is preferable to process events on a separate thread. In addition, when <span class="ph">SAP Commerce</span> is deployed on a cluster in a production environment, a system administrator may want event processing to occur on particular nodes. You can achieve both of these things by enabling cluster-aware events. </p> 
    </div> 
    <table id="anchorrow21"> 
     <tbody> 
      <tr id="row21"> 
       <td id="row21"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loioac8769ff4f4c4e3db3d1ac5083311a8e"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Set Up Asynchronous Messaging</h2></td> 
            <td id="copiersrow21"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Create a Custom Event' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack21">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Create a Custom Event"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack21">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Implement asynchronous messaging and cluster-aware processing to avoid potential wait time issues. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testAsyncEventInterceptorIntegrationTest&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testAsyncEventInterceptorIntegrationTest"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testAsyncEventInterceptorIntegrationTest test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testAsyncEventInterceptorIntegrationTest test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Modify the <span class="keyword apiname">BandAlbumSalesEvent</span> to become cluster-aware.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">Add <samp class="ph codeph">implements ClusterAwareEvent</samp>, then define a new publish method that ensures events are published and processed only by the node they come from. </p> 
              <code-snippet id="concerttours.events.BandAlbumSalesEventAsync"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the cluster-aware event yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/events/BandAlbumSalesEvent.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/events/BandAlbumSalesEventAsync.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/events/BandAlbumSalesEventAsync.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/events/BandAlbumSalesEvent.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\events\BandAlbumSalesEventAsync.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\events\BandAlbumSalesEvent.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Add a new test named <span class="keyword apiname">testEventSendingAsync</span> to account for a possible delay and comment out the <samp class="ph codeph">@Test</samp> annotation to disable <samp class="ph codeph">testEventSending()</samp>.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.events.BandAlbumSalesEventListenerIntegrationTestAsync"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to update the test method yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/events/BandAlbumSalesEventListenerIntegrationTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/events/BandAlbumSalesEventListenerIntegrationTestAsync.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/events/BandAlbumSalesEventListenerIntegrationTestAsync.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/events/BandAlbumSalesEventListenerIntegrationTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\events\BandAlbumSalesEventListenerIntegrationTestAsync.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\events\BandAlbumSalesEventListenerIntegrationTest.java"></q> 
              </div> 
              <aside class="note note insertion"> 
               <span class="title">Note</span> The test extends ServicelayerTest but not ServicelayerTransactionalTest. This is intentional. If you run this test in a transaction, you might run into database isolation configuration issues. For example, if you run this test in a transaction and the database isolation level is set to 
               <samp class="ph codeph">repeatable read</samp>, the news item would be outside your test transaction since you create news in a separate thread. In other words, whatever gets committed outside the transaction is not visible within the transaction (repeatable read isolation) causing the test to fail. Changing the isolation level to less strict ( 
               <samp class="ph codeph">read committed</samp>) would cause the test to pass. 
              </aside> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loioac8769ff4f4c4e3db3d1ac5083311a8e__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Initialize your test tenant.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant yunitinit"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant yunitinit"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the <span class="ph filepath">BandAlbumSalesEventListenerIntegrationTest</span> test and confirm that you see found 7 testclasse(s) in the log output.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">View the test results at <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/junit/index.html</span> and confirm that <span class="ph filepath">BandAlbumSalesEventListenerIntegrationTest</span> test has passed.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testAsyncEventInterceptorIntegrationTest"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testAsyncEventInterceptorIntegrationTest test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testAsyncEventInterceptorIntegrationTest test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Set Up Asynchronous Messaging&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Set Up Asynchronous Messaging&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title22"><h1 class="title topictitle1">Cron Jobs</h1></td> 
        <td class="titlearrows"><a href="#title21">▲</a> <a href="#title23" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc"><span class="ph">SAP Commerce</span> provides a means to set up regular tasks. With these tasks, or cron jobs, you can repeatedly perform complex business logic at particular times and intervals. </p> 
     <p class="p">You may want to perform an inventory every Sunday at midnight, for example, or notify the web administrator of the peak loads on the servers every hour. You can achieve this through a combination of dedicated classes for the business logic, and the embedded cron job management functionality of <span class="ph">SAP Commerce</span>. </p> 
     <p class="p">The first step in implementing a cron job is to place your business logic in a class that extends <span class="keyword apiname">AbstractJobPerformable</span>. You then develop a new, simple service to provide access to the news items, and encapsulate that business logic in a job class. The steps are similar to those you took to create the band service, and serve to reinforce this pattern. </p> 
     <p class="p">The <span class="ph">SAP Commerce</span> platform ships with a useful email utility class, <span class="keyword apiname">MailUtils</span>, that simplifies the sending of e-mails with commons mail API. You make use of the <span class="keyword apiname">MailUtils</span> class to create an e-mail message object populated with values from the <span class="ph filepath">local.properties</span> file in your <span class="ph filepath">config</span> directory. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8b9ce4868669101499b2f0f25ef9395f.html" title="The cronjob functionality is used for executing tasks, called cron jobs, regularly at a certain point of time. Typically cron jobs can be used for creating data for backups, updating catalog contents, or recalculating prices.">The cronjob Service</a> 
     </div> 
    </div> 
    <table id="anchorrow22"> 
     <tbody> 
      <tr id="row22"> 
       <td id="row22"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loioc79ecffe437f4c8ea78f84a36e449dae"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Write the Business Logic for a Cron Job</h2></td> 
            <td id="copiersrow22"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Set Up Asynchronous Messaging' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack22">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Set Up Asynchronous Messaging"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack22">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Write a cron job to send daily news summaries.</p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testSendNewsJobIntegrationTest&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testSendNewsJobIntegrationTest"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSendNewsJobIntegrationTest test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSendNewsJobIntegrationTest test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a news data access interface in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/daos/NewsDAO.java</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.daos.NewsDAO"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the news data access interface yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/daos/NewsDAO.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/daos/NewsDAO.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/daos/NewsDAO.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/daos/NewsDAO.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\daos\NewsDAO.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\daos\NewsDAO.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a news data access implementation in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/daos/impl/DefaultNewsDAO.java</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.daos.impl.DefaultNewsDAO"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the implementation yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/daos/impl/DefaultNewsDAO.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/daos/impl/DefaultNewsDAO.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/daos/impl/DefaultNewsDAO.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/daos/impl/DefaultNewsDAO.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\daos\impl\DefaultNewsDAO.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\daos\impl\DefaultNewsDAO.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a news service interface called <span class="ph filepath">NewsService.java</span> in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/service</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.service.NewsService"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the news service interface yourself or you want to skip this step, copy <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/service/NewsService.java</span> into <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/service</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/service/NewsService.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/service/NewsService.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\service\NewsService.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\service"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a news service implementation called <span class="ph filepath">DefaultNewsService.java</span> in <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/service/impl</span></span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.service.impl.DefaultNewsService"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the implementation yourself or you want to skip this step, copy <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/service/impl/DefaultNewsService.java</span> into <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/service/impl</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/service/impl/DefaultNewsService.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/service/impl/DefaultNewsService.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\service\impl\DefaultNewsService.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\service\impl"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Configure the email server by adding email server properties to the <span class="ph filepath">local.properties</span> file.</span> 
             <div class="itemgroup info"> 
              <p class="p">The example shows how you would do this with a gmail account.</p> 
             </div> 
             <ol type="a" class="ol substeps" id="loioc79ecffe437f4c8ea78f84a36e449dae__substeps_mdk_1bp_f1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Add the following properties to the <span class="ph filepath">local.properties</span> file in the config directory, adjusting them making sure to replace &lt;your gmail username&gt;, &lt;your gmail password&gt;, and &lt;your gmail email address&gt; with your gmail username, password, and email address. If port 587 is not available, change the port.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="mailProperties"></code-snippet> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Update your gmail account to (temporarily) allow less secure applications to access it by selecting the <span class="ph uicontrol">Allow less secure apps</span> option.</span> 
               <div class="itemgroup info"> 
                <p class="p">For more information, see <a class="extlink" href="http://help.sap.com/disclaimer?site=https://myaccount.google.com/lesssecureapps" target="_blank" alt="https://myaccount.google.com/lesssecureapps" title="https://myaccount.google.com/lesssecureapps">Less secure apps<img src="../images/themes/sap-hybris/img/3rd_link.png" class="link-external" alt="Information published on non-SAP site" title="Information published on non-SAP site" border="0"></a>. </p> 
               </div> </li> 
             </ol> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to add the properties yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/config/local.properties</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/config/local.properties</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/config/local.properties $HYBRIS_HOME_DIR/hybris/config/local.properties"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\config\local.properties %HYBRIS_HOME_DIR%\hybris\config\local.properties"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the job class.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.jobs.SendNewsJob"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the job class yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/jobs/SendNewsJob.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/jobs/SendNewsJob.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/jobs/SendNewsJob.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/jobs/SendNewsJob.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\jobs\SendNewsJob.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\jobs\SendNewsJob.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Register the service and job in Spring.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="injectingNewService"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to register the service and job yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withNewsService.xml</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withNewsService.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-spring.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-spring-withNewsService.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-spring.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Write an integration test to test successful job creation.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.jobs.SendNewsJobIntegrationTest"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the integration test yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/jobs/SendNewsJobIntegrationTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/jobs/SendNewsJobIntegrationTest.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/jobs/SendNewsJobIntegrationTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/jobs/SendNewsJobIntegrationTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\jobs\SendNewsJobIntegrationTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\jobs\SendNewsJobIntegrationTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loioc79ecffe437f4c8ea78f84a36e449dae__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the integration test and confirm that <span class="ph filepath">SendNewsJobIntegrationTest</span> passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">View the test results at <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/junit/index.html</span>.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testSendNewsJobIntegrationTest"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSendNewsJobIntegrationTest test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSendNewsJobIntegrationTest test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Write the Business Logic for a Cron Job&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Write the Business Logic for a Cron Job&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title23"><h1 class="title topictitle1">Triggers</h1></td> 
        <td class="titlearrows"><a href="#title22">▲</a> <a href="#title24" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">With your business logic successfully factored into a job class, you can trigger its execution with the use of a cron job. </p> 
     <p class="p">A cron job consists of the <span class="keyword apiname">job</span> class containing the business logic, and a trigger to start the job at regular intervals. The first step in setting up a new cron job is to notify <span class="ph">SAP Commerce</span> of your new class by creating your essential data. During the creation of essential data, a <span class="keyword apiname">ServicelayerJob</span> item is created for every Spring definition that has a class implementing the <span class="keyword apiname">JobPerformable</span> interface. The code attribute of each of the new job item is set to the name of the relevant Spring bean. </p> 
     <p class="p">Once a <span class="keyword apiname">ServicelayerJob</span> item is created, you can create a cron job to wrap the <span class="keyword apiname">ServicelayerJob</span>, and define a trigger to that starts it. </p> 
     <p class="p">A cron expression is a string comprised of 6 or 7 fields separated by white space. Fields can contain any of the allowed values, along with various combinations of allowed special characters for that field. </p> 
     <div class="table-wrapper tablenoborder"> 
      <table summary="" id="loioca2cdc04d69e46f0b507296574d6b083__table_d3k_c2n_j1b" class="table" frame="border" border="1" rules="all"> 
       <colgroup> 
        <col width="25%"> 
        <col width="25%"> 
        <col width="25%"> 
        <col width="25%"> 
       </colgroup> 
       <thead class="thead" style="text-align:left;"> 
        <tr class="row"> 
         <th class="entry" style="vertical-align:top;" id="d19321e56">Field Name</th> 
         <th class="entry" style="vertical-align:top;" id="d19321e59">Mandatory</th> 
         <th class="entry" style="vertical-align:top;" id="d19321e62">Allowed Values</th> 
         <th class="entry" style="vertical-align:top;" id="d19321e65">Allowed Special Characters</th> 
        </tr> 
       </thead> 
       <tbody class="tbody"> 
        <tr class="row"> 
         <td class="entry" style="vertical-align:top;" headers="d19321e56 ">Seconds</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e59 ">YES</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e62 ">0-59</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e65 ">, - * /</td> 
        </tr> 
        <tr class="row"> 
         <td class="entry" style="vertical-align:top;" headers="d19321e56 ">Minutes</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e59 ">YES</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e62 ">0-59</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e65 ">, - * /</td> 
        </tr> 
        <tr class="row"> 
         <td class="entry" style="vertical-align:top;" headers="d19321e56 ">Hours</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e59 ">YES</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e62 ">0-23</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e65 ">, - * /</td> 
        </tr> 
        <tr class="row"> 
         <td class="entry" style="vertical-align:top;" headers="d19321e56 ">Day of week</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e59 ">YES</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e62 ">1-7 or SUN-SAT</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e65 ">, - * ? / L #</td> 
        </tr> 
        <tr class="row"> 
         <td class="entry" style="vertical-align:top;" headers="d19321e56 ">Day of month</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e59 ">YES</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e62 ">31-Jan</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e65 ">, - * ? / L W</td> 
        </tr> 
        <tr class="row"> 
         <td class="entry" style="vertical-align:top;" headers="d19321e56 ">Month</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e59 ">YES</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e62 ">1-12 or JAN-DEC</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e65 ">, - * /</td> 
        </tr> 
        <tr class="row"> 
         <td class="entry" style="vertical-align:top;" headers="d19321e56 ">Year</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e59 ">NO</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e62 ">empty, 1970-2099</td> 
         <td class="entry" style="vertical-align:top;" headers="d19321e65 ">, - * /</td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <p class="p">The first cron job you create for your extension runs on a daily basis, and sends out summaries of new items by email to a specific email address or distribution list. Then you create a second cron job using a scripting language instead of a Java class. Using a scripting language, you can add cron jobs to a system without having to rebuild and redeploy it. </p> 
    </div> 
    <table id="anchorrow23"> 
     <tbody> 
      <tr id="row23"> 
       <td id="row23"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio063fbbbcf42045a589f299ccd6a21fa5"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Set Up Your Cron Job with a Trigger Using Impex</h2></td> 
            <td id="copiersrow23"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Write the Business Logic for a Cron Job' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack23">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Write the Business Logic for a Cron Job"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack23">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Set up your cron job to get triggered at regular intervals.</p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testSendingNewsMails&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testSendingNewsMails"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSendingNewsMails test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSendingNewsMails test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Reinitialize in the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>).</span> 
             <ol type="a" class="ol substeps"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Log into the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>) at curl9002 using the login, admin, and the password, nimda.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Platform</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Initialization</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> or go directly to curl9002<span class="ph filepath">/platform/init</span> </span></li> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph uicontrol">Project data settings</span> area ensure all the checkboxes are selected.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click the <span class="ph uicontrol">Initialize</span> button.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio063fbbbcf42045a589f299ccd6a21fa5__fig_ztr_zhr_d1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loio063fbbbcf42045a589f299ccd6a21fa5__image_jk5_p3r_d1b" src="../images/loio77e5aae699004029bc82955abc34c386_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
             </ol> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to initialize the system yourself or you want to skip this step, run the following maven command. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#simulateInitialization test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#simulateInitialization test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Check that the ServicelayerJob was successfully created.</span> 
             <ol type="a" class="ol substeps" id="loio063fbbbcf42045a589f299ccd6a21fa5__substeps_yr1_sms_xz2"> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph">SAP Commerce Administration Console</span>, go to the <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Console</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">FlexibleSearch</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> option.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">The <span class="ph uicontrol">FlexibleSearch</span> page appears. </p> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">To check that a new ServicelayerJob item has been created, enter the query <samp class="ph codeph">select {code} from {servicelayerjob} where {code} = 'sendNewsJob'</samp> into the <span class="ph uicontrol">FlexibleSearch</span> query text box and click the <span class="ph uicontrol">Execute</span> button. </span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the cron job and the trigger.</span> 
             <ol type="a" class="ol substeps" id="loio063fbbbcf42045a589f299ccd6a21fa5__substeps_ilr_f35_j1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph">SAP Commerce Administration Console</span>, go the <span class="ph uicontrol">Console</span> tab and select the <span class="ph uicontrol">Impex Import</span> option.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Expand the settings area, select the <span class="ph uicontrol">Enable code execution</span> checkbox, and import the impex script.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="essentialdataJobs"></code-snippet> 
               </div> 
               <div class="itemgroup stepresult"> 
                <p class="p">The console output shows the job being triggered every 10 seconds. In a production environment, you would change the trigger to run once at the end of the day. </p> 
               </div> </li> 
             </ol> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to trigger the cron job yourself or you want to skip this step, run the following command. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#simulateLoadingJobImpex test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#simulateLoadingJobImpex test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">So that the ImpEx script is loaded by CoC, create the <span class="ph filepath">essentialdataJobs.impex</span> file in <span class="ph filepath">resources/impex/</span> with this same impex content so that these items are recreated during the essential data loading phase of any initialization or update operation.</span> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the <span class="ph filepath">essentialdataJobs.impex</span> file or you want to skip this step, copy <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/script/essentialdataJobs.impex</span> to <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/impex</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/script/essentialdataJobs.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/essentialdataJobs.impex"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\script\essentialdataJobs.impex %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testSendingNewsMails"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSendingNewsMails test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testSendingNewsMails test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Set Up Your Cron Job with a Trigger Using Impex&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Set Up Your Cron Job with a Trigger Using Impex&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title24"><h1 class="title topictitle1">Groovy</h1></td> 
        <td class="titlearrows"><a href="#title23">▲</a> <a href="#title25" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">You can use the Groovy scripting language to write jobs for execution.</p> 
    </div> 
    <table id="anchorrow24"> 
     <tbody> 
      <tr id="row24"> 
       <td id="row24"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loiodccb731a48d142a49434368c47aac1ec"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Create a Cronjob Script Using Groovy</h2></td> 
            <td id="copiersrow24"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Set Up Your Cron Job with a Trigger Using Impex' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack24">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Set Up Your Cron Job with a Trigger Using Impex"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack24">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Write a job using Groovy to modify the approval status of the concerts.</p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testGroovyScript&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testGroovyScript"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testGroovyScript test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testGroovyScript test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Retrieve the list of concerts with their approval status.</span> 
             <ol type="a" class="ol substeps" id="loiodccb731a48d142a49434368c47aac1ec__substeps_yr1_sms_xz2"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Log into the <span class="ph">SAP Commerce Administration Console</span> (<span class="ph">Administration Console</span>) at curl9002 using the login, admin, and the password, nimda.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph">SAP Commerce Administration Console</span>, go to the <span class="ph uicontrol">Console</span> tab and select the <span class="ph uicontrol">FlexibleSearch</span> option.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">The <span class="ph uicontrol">FlexibleSearch</span> page appears. </p> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">To check the approval status of all concerts, enter the query <samp class="ph codeph">SELECT {p.pk}, {p.code}, {p.name}, {q.code} FROM {Concert AS p}, {ArticleApprovalStatus AS q} WHERE {p.approvalstatus} = {q.pk}</samp> into the <span class="ph uicontrol">FlexibleSearch</span> query text box and click the <span class="ph uicontrol">Execute</span> button. </span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a job using Groovy script.</span> 
             <ol type="a" class="ol substeps" id="loiodccb731a48d142a49434368c47aac1ec__substeps_ilr_f35_j1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph">SAP Commerce Administration Console</span>, go the <span class="ph uicontrol">Console</span> tab, select the <span class="ph uicontrol">Scripting Languages</span> option, and select <span class="ph uicontrol">Groovy</span> in the <span class="ph uicontrol">Script type</span> drop-down menu.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Enter the Groovy script.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="groovyjob"></code-snippet> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Save the script in the database by entering the name <kbd class="ph userinput">clearoldconcerts</kbd> in the <span class="ph uicontrol">code</span> field above the script and click the <span class="ph uicontrol">Save</span> button.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Run the script by clicking on the <span class="ph uicontrol">Execute</span> button.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">The script should run without errors.</p> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click on the <span class="ph uicontrol">RollBack</span> button so that it shows Commit and execute the script again.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">This time the results are committed in the database, and you should be able to see them in other consoles. </p> 
               </div> </li> 
             </ol> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the Groovy script yourself or you want to skip this step, run the following command. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#simulateGroovyScript test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#simulateGroovyScript test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Retrieve the list of concerts with their approval status again.</span> 
             <ol type="a" class="ol substeps" id="loiodccb731a48d142a49434368c47aac1ec__substeps_olw_dgv_j1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph">SAP Commerce Administration Console</span>, go to the <span class="ph uicontrol">Console</span> tab and select the <span class="ph uicontrol">FlexibleSearch</span> option.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">The <span class="ph uicontrol">FlexibleSearch</span> page appears. </p> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">To check that a new ServicelayerJob item has been created, enter the query <samp class="ph codeph">SELECT {p.pk}, {p.code}, {p.name}, {q.code} FROM {Concert AS p}, {ArticleApprovalStatus AS q} WHERE {p.approvalstatus} = {q.pk}</samp> into the <span class="ph uicontrol">FlexibleSearch</span> query text box and click the <span class="ph uicontrol">Execute</span> button. </span> </li> 
             </ol> 
             <div class="itemgroup stepresult"> 
              <p class="p">The approvalStatus values have changed.</p> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Wrap the job in a cron job and invoke with a trigger by running the ImpEx script in the <span class="ph uicontrol">Impex Import</span> console.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="groovycronjobtrigger"></code-snippet> 
             </div> 
             <div class="itemgroup stepresult"> 
              <p class="p">The console output shows the job being triggered every 10 seconds. In a production environment, you would change the trigger to run once at the end of the day. </p> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testGroovyScript"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testGroovyScript test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testGroovyScript test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Create a Cronjob Script Using Groovy&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Create a Cronjob Script Using Groovy&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title25"><h1 class="title topictitle1"><span class="ph">Backoffice Administration Cockpit</span></h1></td> 
        <td class="titlearrows"><a href="#title24">▲</a> <a href="#title26" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc"><span class="ph">Backoffice Administration Cockpit</span> is a user-friendly, browser-based, user interface for viewing, creating, and manipulating data within <span class="ph">SAP Commerce</span>. </p> 
     <p class="p"><span class="ph">Backoffice Administration Cockpit</span> consists of widgets, each with a specific function. This allows you to manage a range of different data types. The primary data used by <span class="ph">SAP Commerce</span> is available in the Administration perspective. You can select individual categories from the explorer tree, a menu listing in the left hand side of the main window. From here, you can view, list, enter, and edit catalog and product data, user data including roles and permissions, price settings, internationalization, or basic system configuration data. </p> 
     <p class="p">For the <span class="keyword apiname">concerttours</span> extension, <span class="ph">Backoffice Administration Cockpit</span> is useful for viewing and editing band and tour data in a user-friendly way. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c16979286691014abe6f41434c7614a.html" title="Backoffice Administration Cockpit is a user-centric backend interface that enables you to easily manage any kind of data within SAP Commerce system. It provides specific widgets needed to create administrative and management tools, such as search, list views, or navigation tree.">Backoffice Administration Cockpit</a> 
     </div> 
    </div> 
    <table id="anchorrow25"> 
     <tbody> 
      <tr id="row25"> 
       <td id="row25"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loiod34e1a1e28dc440b97134669cf63bc0f"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Install Backoffice Administration Cockpit</h2></td> 
            <td id="copiersrow25"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Create a Cronjob Script Using Groovy' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack25">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Create a Cronjob Script Using Groovy"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack25">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Add the <span class="keyword apiname">platformbackoffice</span> extension to your installation, and use it to list your items. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testBackofficeProductListingContainsTheBands&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testBackofficeProductListingContainsTheBands"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBackofficeProductListingContainsTheBands test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBackofficeProductListingContainsTheBands test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Add the <span class="keyword apiname yext">platformbackoffice</span> extension to your <span class="ph filepath">localextensions.xml</span> file located in the <span class="ph filepath">config</span> folder.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="localextensions.xml_withbackoffice"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to add the extension or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/config/localextensions.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/withbackoffice/localextensions.xml</span>. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/withbackoffice/localextensions.xml $HYBRIS_HOME_DIR/hybris/config/localextensions.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\withbackoffice\localextensions.xml %HYBRIS_HOME_DIR%\hybris\config\localextensions.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild the system.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant build"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant build"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Reinitialize the system.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant initialize"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant initialize"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Explore <span class="ph">Backoffice Administration Cockpit</span>.</span> 
             <ol type="a" class="ol substeps" id="loiod34e1a1e28dc440b97134669cf63bc0f__substeps_ld3_gp3_d1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Open <span class="ph">Backoffice</span> at curl9002<span class="ph filepath">/backoffice</span> and log in with user <kbd class="ph userinput">admin</kbd> and password <kbd class="ph userinput">nimda</kbd>.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the Explorer Tree of <span class="ph">Backoffice Administration Cockpit</span>, navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">System</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Types</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span>. </span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loiod34e1a1e28dc440b97134669cf63bc0f__fig_dq5_scp_f1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loiod34e1a1e28dc440b97134669cf63bc0f__image_bfh_pfp_f1b" src="../images/loioc645c7b4c9b049b8a217cbb070f43a37_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">In the <span class="ph uicontrol">Search</span> field, enter <kbd class="ph userinput">Band</kbd>. Click the <samp class="ph systemoutput">Band</samp> item in the search results to view the details of the item type.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loiod34e1a1e28dc440b97134669cf63bc0f__fig_x5b_1hp_f1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loiod34e1a1e28dc440b97134669cf63bc0f__image_t4f_53p_f1b" src="../images/loioe2579fcd147a488a839ddb615256f00c_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">In the Explorer Tree of <span class="ph">Backoffice Administration Cockpit</span>, navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Catalog</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Products</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> to locate the concert tours.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">You should see the listing of concerts.</p> 
              <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loiod34e1a1e28dc440b97134669cf63bc0f__fig_gdx_hfj_d1b"> 
               <div class="figbody"> 
                <img xmlns="" class="inline  " id="loiod34e1a1e28dc440b97134669cf63bc0f__image_x42_1gj_d1b" src="../images/loioe6625f133b554f5e8cf9fa95a9b74dfb_LowRes.png"> 
               </div> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testBackofficeProductListingContainsTheBands"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBackofficeProductListingContainsTheBands test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBackofficeProductListingContainsTheBands test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Install Backoffice Administration Cockpit&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Install Backoffice Administration Cockpit&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title26"><h1 class="title topictitle1">Localization</h1></td> 
        <td class="titlearrows"><a href="#title25">▲</a> <a href="#title27" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">Localization is intended to adapt <span class="ph">SAP Commerce</span> to multiple languages. </p> 
     <p class="p">Localization is built into <span class="ph">SAP Commerce Platform</span> from the ground up, not bolted-on as an after thought. As a result, you can declare attributes and relations of item types as <samp class="ph codeph">localized</samp> in an extension's <span class="ph filepath">*-items.xml</span> file, and the system automatically provides for multiple values for different locales. Even the type system names themselves can be localized so that when item type and attribute names appear in user interfaces, they can be in the user's chosen language. </p> 
     <p class="p">When the <span class="ph">SAP</span> build system encounters the <samp class="ph codeph">localized</samp> keyword, instead of a single valued attribute, it creates a map of values keyed by language for that attribute, and generates an equivalent construct in the database. </p> 
     <p class="p">Impex has a built-in syntax for specifying values for localized values, and it is often more manageable to separate content across impex files by language. While it is not necessary to use separate files for language-specific content, it usually makes it much easier to understand and manage. Particularly, it makes adding and removing the content for a specific language easier. </p> 
     <p class="p">In the hybris123 integration tests, you used the model service to create new instances of bands, concerts, and others. The model service handles the provision of a locale to use when working with localized attributes. Unfortunately, when it comes to unit tests you don't have the context provided by the model service. As a result, when you call the usual getter or setter of a localized attribute, the model object doesn't know which language to map the value to. If you are only accessing localized attributes in your test code, you can fix this problem by using a getter and setter that specifies the locale that you want used as an extra parameter. </p> 
     <p class="p">If the simple accessors are being called in the code that you are testing, there is no way to provide a <samp class="ph codeph">LocaleProvider</samp> for them to use. As a result, you can no longer test that code in a unit test. You have to fall back to using integration tests. </p> 
     <p class="p">If for example you replace the calls to <span class="keyword apiname">getHistory()</span> and <span class="keyword apiname">setHistory()</span> in the test <span class="keyword apiname">DefaultBandFacadeUnitTest</span> methods with <span class="keyword apiname">getHistory(Locale.ENGLISH)</span> and <span class="keyword apiname">setHistory(BAND_HISTORY, Locale.ENGLISH)</span>, that test will still fail because the code that you are testing in the actual <span class="keyword apiname">DefaultBandFacade</span> class calls the simple <span class="keyword apiname">getHistory()</span> accessor. </p> 
     <p class="p">The only way you can make this test pass is to have the code you are testing check if you are running outside the <span class="ph">SAP Commerce Server</span> context and modify its behaviour to cope with that. That makes no sense, so unfortunately you have to stop using this unit test and rely on the slower integration test instead. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8bfc204086691014a345f64b08505839.html" title="Internationalization and localization are intended to adapt SAP Commerce to multiple languages and different requirements dependent on a region.">Internationalization and Localization Overview</a> 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8b76856086691014a125e8e6d7d36f59.html" title="Localization files support Unicode in order to display characters of almost all living languages.">Character Encoding Requirements for Localization Files</a> 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c02eb4d86691014a63efdc67af7b9e8.html" title="SAP Commerce supports multiple languages. This makes it easy to use SAP Commerce to run applications for different countries.">Languages and Localization</a> 
     </div> 
    </div> 
    <table id="anchorrow26"> 
     <tbody> 
      <tr id="row26"> 
       <td id="row26"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loiod8b5b9643a3c470f9612808ddeda867f"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Localize Attribute Values Using ImpEx</h2></td> 
            <td id="copiersrow26"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Install Backoffice Administration Cockpit' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack26">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Install Backoffice Administration Cockpit"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack26">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Localize attribute values and type system names.</p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testLocalizedServiceLayerTest&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testLocalizedServiceLayerTest"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testLocalizedServiceLayerTest test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testLocalizedServiceLayerTest test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Modify the <span class="ph filepath">concerttours-items.xml</span> file to enable localization of the <samp class="ph codeph">hashtag</samp> and <samp class="ph codeph">history</samp> attributes. </span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours-items.xml_localizeHashtag"></code-snippet> 
              <code-snippet id="concerttours-items.xml_localizeHistory"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to modify the <span class="ph filepath">concerttours-items.xml</span> file or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-items.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithLocalization.xml</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithLocalization.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-items.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-itemsWithLocalization.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-items.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Split the <span class="ph filepath">concerttours-bands.impex</span> file into three files to localize the related impex files: one file for the language-independent content (<span class="ph filepath">/impex/concerttours-bands.impex</span>), one for the English content (<span class="ph filepath">/impex/concerttours-bands-en.impex</span>), and one for the German content (<span class="ph filepath">/impex/concerttours-bands-de.impex</span>). </span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours-bands.impex_withlocalization"></code-snippet> 
              <code-snippet id="concerttours-bands-de.impex_withlocalization"></code-snippet> 
              <code-snippet id="concerttours-bands-en.impex_withlocalization"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to split the <span class="ph filepath">concerttours-bands.impex</span> file into three files or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/impex/</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/impex/withlocalization/*</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="mkdir -p $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex; cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/impex/withlocalization/concerttours-bands* $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\impex\withlocalization\concerttours-bands* %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Modify <span class="ph filepath">concerttours-yBandTour.impex</span> to include both English and German hashtags.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours-yBandTour.impex_withlocalization"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to modify the <span class="ph filepath">concerttours-yBandTour.impex</span> file or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/impex/</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/impex/withlocalization/*</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/impex/withlocalization/concerttours-yBandTour.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/concerttours-yBandTour.impex"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\impex\withlocalization\concerttours-yBandTour.impex %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Update the <span class="keyword apiname">ConcerttoursCustomSetup</span> class to load the three localized files instead of the default, which is one non-localized file.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.setup.ConcerttoursCustomSetup_localized"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to update the <span class="keyword apiname">ConcerttoursCustomSetup</span> class or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/setup/ConcerttoursCustomSetup.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/setup/LocalizedConcerttoursCustomSetup.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/setup/LocalizedConcerttoursCustomSetup.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/setup/ConcerttoursCustomSetup.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\setup\LocalizedConcerttoursCustomSetup.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\setup\ConcerttoursCustomSetup.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">In the <span class="keyword apiname">DefaultBandServiceUnitTest</span> class, modify the call to the <span class="keyword apiname">setHistory()</span> method to include a reference to the required locale so that the unit test is locale-aware. </span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.service.impl.DefaultBandServiceUnitTest_Localized"></code-snippet> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Add <samp class="ph codeph">import java.util.Locale;</samp> to the list of imports in the <span class="ph filepath">DefaultBandServiceUnitTest.java</span> test.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.service.impl.DefaultBandServiceUnitTest_LocalizedImport"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to modify the test or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceUnitTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/service/impl/Localized_DefaultBandServiceUnitTest.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/service/impl/Localized_DefaultBandServiceUnitTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceUnitTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\service\impl\Localized_DefaultBandServiceUnitTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\service\impl\DefaultBandServiceUnitTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild and re-initialize the database.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all initialize yunitinit"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all initialize yunitinit"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the tests and note that <span class="keyword apiname">DefaultBandFacadeUnitTest</span> fails but <span class="keyword apiname">DefaultBandServiceUnitTest</span> passes for reasons described in the discussion on Localization.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant alltests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant alltests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testLocalizedServiceLayerTest"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testLocalizedServiceLayerTest test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testLocalizedServiceLayerTest test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Remove the file <span class="ph filepath">DefaultBandFacadeUnitTest.java</span>.</span> 
             <div class="itemgroup info"> 
              <p class="p">The <span class="keyword apiname">DefaultBandFacadeUnitTest</span> is no longer compatible and will fail, for reasons described in the Localization overview. </p> 
             </div> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="rm $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeUnitTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="del %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\facades\impl\DefaultBandFacadeUnitTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Localize Attribute Values Using ImpEx&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Localize Attribute Values Using ImpEx&quot;"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title27"><h1 class="title topictitle1">Localization in <span class="ph">Backoffice Administration Cockpit</span></h1></td> 
        <td class="titlearrows"><a href="#title26">▲</a> <a href="#title28" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">You can define localized values for item type attributes directly in the <span class="ph">Backoffice Administration Cockpit</span>. </p> 
     <p class="p"> </p> 
    </div> 
    <table id="anchorrow27"> 
     <tbody> 
      <tr id="row27"> 
       <td id="row27"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loiod9a44d7e658f4219be780fdd05be6fd4"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Localize Attribute Values Using Backoffice</h2></td> 
            <td id="copiersrow27"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Localize Attribute Values Using ImpEx' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack27">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Localize Attribute Values Using ImpEx"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack27">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Provide localized string entries for the <span class="ph uicontrol">history</span> field of items of type <span class="keyword apiname">Band</span>. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testBackofficeLocalization&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testBackofficeLocalization"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBackofficeLocalization test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBackofficeLocalization test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Open <span class="ph">Backoffice</span> at curl9002<span class="ph filepath">/backoffice</span> and log in with user <kbd class="ph userinput">admin</kbd> and password <kbd class="ph userinput">nimda</kbd>.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">In the Explorer Tree of <span class="ph">Backoffice Administration Cockpit</span>, navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">System</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Types</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span>.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Search for the <span class="keyword apiname">Band</span> item type and, in the details panel toolbar, click the <span class="ph uicontrol">Search by type</span> button <img class="inline  " id="loiod9a44d7e658f4219be780fdd05be6fd4__image_ml1_yzc_5bb" src="../images/loioba5ceaf0a1e1407e8376ac62c3f76569_LowRes.png">.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Select one of the Band items, and explore its localized history values by clicking the <span class="ph uicontrol">Band.history</span> world icon.</span> 
             <div class="itemgroup stepxmp"> 
              <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loiod9a44d7e658f4219be780fdd05be6fd4__fig_z2q_q12_g1b"> 
               <div class="figbody"> 
                <img xmlns="" class="inline  " id="loiod9a44d7e658f4219be780fdd05be6fd4__image_dq5_bb2_g1b" src="../images/loiod7dc221c47584098b8fa3c1246220b99_LowRes.png"> 
               </div> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Add localized string entries in the <span class="ph filepath">concerttours/resources/localization/concerttours-locales_en.properties</span> type system localization file, and the <span class="ph filepath">concerttours/resources/localization/concerttours-locales_de.properties</span> type system localization file, to provide the localized version of the Type System.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">Each entry is in the form <samp class="ph codeph">key=localized value</samp>, as follows: </p> 
              <code-snippet id="concerttours-locales_en.localizedproperties"></code-snippet> 
              <code-snippet id="concerttours-locales_de.localizedproperties"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p">If you define new item types, attributes and relations, and others, you should provide localized versions of their names that can be used by <span class="ph">Backoffice</span> applications such as <span class="ph">Backoffice Administration Cockpit</span>. </p> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to add the entries or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/localization/concerttours-locales_en.properties</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/localization/concerttours-locales_en.localizedproperties</span>, and <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/localization/concerttours-locales_de.properties</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/localization/concerttours-locales_de.localizedproperties</span>. </p> 
              <div style="margin-bottom: 0;" class="os multicmd"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
              </div> 
              <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/localization/concerttours-locales_en.localizedproperties $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/localization/concerttours-locales_en.properties"></q> 
              <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/localization/concerttours-locales_de.localizedproperties $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/localization/concerttours-locales_de.properties"></q> 
              <div style="margin-bottom: 0;" class="os multicmd"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
              </div> 
              <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\localization\concerttours-locales_en.localizedproperties %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\localization\concerttours-locales_en.properties"></q> 
              <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\localization\concerttours-locales_de.localizedproperties %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\localization\concerttours-locales_de.properties"></q> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Log in to <span class="ph">SAP Commerce Administration Cockpit</span>, and update the system with the new localizations from the <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Platform</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Update</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> screen. To save time select only the <span class="ph uicontrol">Localize types</span> option. Deselect everything else.</span> 
             <div class="itemgroup stepxmp"> 
              <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loiod9a44d7e658f4219be780fdd05be6fd4__fig_awd_tc2_g1b"> 
               <div class="figbody"> 
                <img xmlns="" class="inline  " id="loiod9a44d7e658f4219be780fdd05be6fd4__image_isp_tc2_g1b" src="../images/loiod7244a7c0c1f4380a4439edb221bb95d_LowRes.png"> 
               </div> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Explore the localized types in <span class="ph">Backoffice Administration Cockpit</span>.</span> 
             <ol type="a" class="ol substeps" id="loiod9a44d7e658f4219be780fdd05be6fd4__substeps_u5v_2qd_31b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Open <span class="ph">Backoffice</span> and in the Explorer Tree navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">System</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Types</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span>.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Search for <span class="keyword apiname">Concert</span>, then click on the <span class="ph uicontrol">Properties</span> tab.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click the three dots next to an item, and select <span class="ph uicontrol">Edit Details</span> to explore the property details. Notice the localized name and description.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loiod9a44d7e658f4219be780fdd05be6fd4__fig_ztt_zqd_31b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loiod9a44d7e658f4219be780fdd05be6fd4__image_a5t_zqd_31b" src="../images/loio825937dc705148c7b74280b66d64144a_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Repeat the last step, this time searching for <span class="keyword apiname">Band</span>, then again for <span class="keyword apiname">News</span>.</span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Log out of <span class="ph">Backoffice Administration Cockpit</span> and log in again selecting Deutsch as the language. Notice that the supplied German values are now used for the names and description.</span> 
             <div class="itemgroup stepxmp"> 
              <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loiod9a44d7e658f4219be780fdd05be6fd4__fig_mwp_1f2_g1b"> 
               <div class="figbody"> 
                <img xmlns="" class="inline  " id="loiod9a44d7e658f4219be780fdd05be6fd4__image_jzl_qf2_g1b" src="../images/loio5b53319816134705bec198f0bd594501_LowRes.png"> 
               </div> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testBackofficeLocalization"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBackofficeLocalization test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBackofficeLocalization test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Localize Attribute Values Using Backoffice&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Localize Attribute Values Using Backoffice&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title28"><h1 class="title topictitle1">Validation</h1></td> 
        <td class="titlearrows"><a href="#title27">▲</a> <a href="#title29" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">The <span class="ph">SAP Commerce</span> data validation framework ensures clean, correct, and useful data. The validation framework is based on the Java validation specification, JSR 303. It offers an easy and extensible way to validate data before it is passed on to the persistence layer. </p> 
     <p class="p">The data validation framework has several goals:</p> 
     <ul class="ul" id="loiod394ef6271864441aafd474c26f4b769__ul_qrd_t4h_f1b"> 
      <li class="li">To offer a framework for defining data validation constraints in easy and intuitive way </li> 
      <li class="li">To validate data before it is saved</li> 
      <li class="li">To notify about any validation violations should they occur</li> 
     </ul> 
     <p class="p">Validation logic may be triggered in the following ways:</p> 
     <ul class="ul" id="loiod394ef6271864441aafd474c26f4b769__ul_rrd_t4h_f1b"> 
      <li class="li">Implicitly with the <span class="keyword apiname">ValidationInterceptor</span> that hooks into calls to the <span class="keyword apiname">save</span> method in a model </li> 
      <li class="li">Explicitly by manually calling the <samp class="ph codeph">validate</samp> method of the <span class="keyword apiname">ValidationService</span>, and passing in a <span class="ph">SAP Commerce</span> model or POJO to be validated </li> 
     </ul> 
     <p class="p">When validation violations are found, they are presented to the caller for a resolution. The validation framework does not extend to performing client side validation. Validation happens on the server side only. </p> 
     <p class="p">The main components of data validation constraints are:</p> 
     <ul class="ul" id="loiod394ef6271864441aafd474c26f4b769__ul_srd_t4h_f1b"> 
      <li class="li"><span class="keyword apiname">ValidationService</span>: Manages validation constraints, and validates data </li> 
      <li class="li"><span class="ph">Backoffice Administration Cockpit</span>: Provides a front-end for managing instantiated validation constraint types </li> 
      <li class="li">Cockpit integration: Provides users with validation feedback in cockpits</li> 
     </ul> 
     <p class="p">For validation to work, you define constraints. In the procedure that follows you define validation constraints in the <span class="ph filepath">Items.xml</span> file, but there are more ways to define constraints. You can use an ImpEx file, which allows you to automate the process and quickly add more constraints. ImpEx is an ideal way to work between multiple platforms. You can also define constraints in <span class="ph">Backoffice Administration Cockpit</span>. In this way, you can update validation constraints manually and at runtime. To know more about these procedures, see <a class="xref" href="https://help.hybris.com/1811/hcd/39257ab3428943b78a0592541fe8a2af.html#loio39257ab3428943b78a0592541fe8a2af" title="You can create and define validation constraints in the SAP Commerce Backoffice Administration Cockpit.">Validation Constraints in Backoffice</a>. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8ba7f5a9866910148b749e7217fa45fa.html" title="SAP Commerce provides a data validation framework based on the JSR 303 bean validation specification. This allows you to define data validation constraints in an easy and intuitive way.">Data Validation Framework</a> 
     </div> 
     <!--?sap-ot O2O class="- topic/link " href="cb8edb3b88c94968b5c8c38cdc039829.xml" text="" desc="" ?--> 
    </div> 
    <table id="anchorrow28"> 
     <tbody> 
      <tr id="row28"> 
       <td id="row28"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loiod6d8dee04e3e48c4841b162b58e70e3c"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Define Validation Constraints in the Items.xml File</h2></td> 
            <td id="copiersrow28"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Localize Attribute Values Using Backoffice' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack28">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Localize Attribute Values Using Backoffice"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack28">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Define a validation constraint in the <span class="ph filepath">Items.xml</span> file. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testValidationConstraintViaItemsXml&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testValidationConstraintViaItemsXml"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintViaItemsXml test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintViaItemsXml test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Make band names mandatory and unique by adding the following modifier tags to the <span class="keyword apiname">name</span> attribute of the Band item type definition in the <span class="ph filepath">concerttours-items.xml</span> file of the <span class="ph filepath">resources</span> folder of the <span class="keyword apiname">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours-items.xml_validation"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to edit the <span class="ph filepath">concerttours-items.xml</span> file or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-items.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithValidation.xml</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithValidation.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-items.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-itemsWithValidation.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-items.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild and initialize <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant build initialize"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant build initialize"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Test the validation constraints in <span class="ph">Backoffice</span>.</span> 
             <ol type="a" class="ol substeps" id="loiod6d8dee04e3e48c4841b162b58e70e3c__substeps_ckk_n5l_j1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
               <div class="itemgroup stepxmp"> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Log in to curl9002<span class="ph filepath">/backoffice</span> as <span class="ph emphasis emphasis">admin</span> (password: <span class="ph emphasis emphasis">nimda</span>), and select the <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">System</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Types</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> nodes in the explorer tree on the left.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Search for the <span class="ph emphasis emphasis">Band</span> item Type, and, in the details panel toolbar, click the <span class="ph uicontrol">Search by Type</span> icon.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Select one of the <span class="ph emphasis emphasis">Band</span> items and try to remove the value of its name attribute by deleting the contents of the name field and pressing the <span class="ph uicontrol">Save</span> button.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">A technical error message will appear and the save operation will be rejected. </p> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Try to change the name attribute of one band to the same name as another band.</span> 
               <div class="itemgroup stepresult"> 
                <p class="p">A technical error message will appear and the save operation will be rejected. </p> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testValidationConstraintViaItemsXml"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintViaItemsXml test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintViaItemsXml test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Define Validation Constraints in the Items.xml File&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Define Validation Constraints in the Items.xml File&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title29"><h1 class="title topictitle1">Validation Constraints in <span class="ph">Backoffice</span></h1></td> 
        <td class="titlearrows"><a href="#title28">▲</a> <a href="#title30" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">You can create and define validation constraints in the <span class="ph">SAP Commerce</span> <span class="ph">Backoffice Administration Cockpit</span>. </p> 
    </div> 
    <table id="anchorrow29"> 
     <tbody> 
      <tr id="row29"> 
       <td id="row29"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio64cc96413b584438984b6bd6b8f55208"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Define a Validation Constraint Using Backoffice</h2></td> 
            <td id="copiersrow29"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Define Validation Constraints in the Items.xml File' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack29">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Define Validation Constraints in the Items.xml File"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack29">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Define a validation constraint in <span class="ph">Backoffice</span>. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testValidationConstraintViaBackoffice&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testValidationConstraintViaBackoffice"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintViaBackoffice test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintViaBackoffice test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">In the <span class="ph">Backoffice Administration Cockpit</span>, open the <span class="ph uicontrol">Administration</span> perspective of the Explorer pane.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">System</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Validation</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Constraints</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span>.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a new minimum value constraint.</span> 
             <ol type="a" class="ol substeps" id="loio64cc96413b584438984b6bd6b8f55208__substeps_v12_5xv_k1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Press the menu arrow on the right of the + toolbar button to drop down a hierarchical list of constraint types.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Expand the <span class="ph uicontrol">Attribute constraint</span> menu item by clicking on the arrow to the left of the menu item text.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click on the <span class="ph uicontrol">Min Constraint item</span> to display the <span class="ph uicontrol">Create New Min Constraint</span> wizard.</span> 
               <div class="itemgroup info"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio64cc96413b584438984b6bd6b8f55208__fig_wwz_yxv_k1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loio64cc96413b584438984b6bd6b8f55208__image_olt_mkw_k1b" src="../images/loiob9ce19a72e3c4ac0878ccf3e786e59b6_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Give the new constraint the ID <kbd class="ph userinput">newConstraint</kbd>.</span> </li> 
              <li class="li substep substepexpand"><span class="ph cmd">Set the <span class="ph uicontrol">Minimal value</span> field to 0 to forbid negative values.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Since you want to validate the enclosing type, start typing <kbd class="ph userinput">Band</kbd> in the <span class="ph uicontrol">Enclosing Type</span> field and choose <span class="ph uicontrol">Band</span> from the list of suggestions when it appears.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Do the same in the <span class="ph uicontrol">Attribute descriptor to validate</span> field to pick the <span class="ph uicontrol">albumSales</span> attribute.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click <span class="ph uicontrol">Next</span>.</span> 
               <div class="itemgroup info"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio64cc96413b584438984b6bd6b8f55208__fig_g1j_4dw_k1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loio64cc96413b584438984b6bd6b8f55208__image_t1m_nkw_k1b" src="../images/loioa852081613964553b3dff9a9cd763150_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Enter the error message Album sales must be &gt; 0. Do pay attention. in the <span class="ph uicontrol">Error</span> message field.</span> </li> 
              <li class="li substep substepexpand"><strong>Optional: </strong> <span class="ph cmd">Click on the globe symbol to access other language options so that you can enter the error message in different languages. </span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click on <span class="ph uicontrol">Done</span>.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio64cc96413b584438984b6bd6b8f55208__fig_kc5_qdw_k1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loio64cc96413b584438984b6bd6b8f55208__image_ky1_4kw_k1b" src="../images/loio63c39abb259346a788fb22013c026e9d_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click on the right most toolbar button to reload the validation engine so that it picks up the new constraint.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio64cc96413b584438984b6bd6b8f55208__fig_ltd_5dw_k1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loio64cc96413b584438984b6bd6b8f55208__image_vn4_4kw_k1b" src="../images/loioab3e14e508c84c279c70772217c7cab4_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
             </ol> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the new constraint in <span class="ph">Backoffice</span> yourself or you want to skip this step, run the following test. This test creates the constraint. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testCreateValidationConstraintViaBackoffice test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testCreateValidationConstraintViaBackoffice test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Check that the new constraint works.</span> 
             <ol type="a" class="ol substeps" id="loio64cc96413b584438984b6bd6b8f55208__substeps_i55_zdw_k1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">System</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Types</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> in the Explorer pane.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Search for the Band item type.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click the <span class="ph uicontrol">Search by type</span> toolbar button to list the bands in the database.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio64cc96413b584438984b6bd6b8f55208__fig_qhn_32w_k1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loio64cc96413b584438984b6bd6b8f55208__image_sn2_pkw_k1b" src="../images/loioffe93cec0aea458db9ddb345049b55e1_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Pick one of the bands. </span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Try to set the album sales attribute to a negative number in the details pane and click <span class="ph uicontrol">Save</span>.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Confirm that the correct error message is displayed in the list of validation errors.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio64cc96413b584438984b6bd6b8f55208__fig_s4w_42w_k1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loio64cc96413b584438984b6bd6b8f55208__image_yks_pkw_k1b" src="../images/loio316d23f4b27a49b6bef51df03b3de06c_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testValidationConstraintViaBackoffice"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintViaBackoffice test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintViaBackoffice test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Define a Validation Constraint Using Backoffice&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Define a Validation Constraint Using Backoffice&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title30"><h1 class="title topictitle1">Validation Constraints in ImpEx</h1></td> 
        <td class="titlearrows"><a href="#title29">▲</a> <a href="#title31" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">You can define validation constraints in ImpEx files, making it easy to reload constraints after initializing the database. </p> 
     <p class="p">Validation constraints are persisted to the database. If you frequently reinitialize the database during the development and testing phase of your project, there is a danger that you could erase any stored constraints. To ease the effort of restoring validation constraints, it is a good idea to define and load them using ImpEx files. </p> 
    </div> 
    <table id="anchorrow30"> 
     <tbody> 
      <tr id="row30"> 
       <td id="row30"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loioce4e966c8e2c4d24bb17c8083bfdf57c"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Define a Validation Constraint Using ImpEx</h2></td> 
            <td id="copiersrow30"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Define a Validation Constraint Using Backoffice' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack30">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Define a Validation Constraint Using Backoffice"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack30">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Define and load validation constraints using ImpEx files.</p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testValidationConstraintAfterImpex&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testValidationConstraintAfterImpex"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintAfterImpex test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintAfterImpex test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a new ImpEx file, called <span class="ph filepath">essentialdata-constraints.impex</span>, in the <span class="ph filepath">resources/impex</span> folder of the <span class="keyword apiname">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="essentialdata-constraints.impex"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the ImpEx file or you want to skip this step, copy <span class="ph filepath">/hybris123/src/main/webapp/resources/impex/validation/essentialdata-constraints.impex</span> to <span class="ph filepath">/hybris/bin/custom/concerttours/resources/impex/</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/impex/validation/essentialdata-constraints.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\impex\validation\essentialdata-constraints.impex %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Initialize the database.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant initialize"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant initialize"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Confirm that you are unable to save a band with negative album sales.</span> 
             <ol type="a" class="ol substeps" id="loioce4e966c8e2c4d24bb17c8083bfdf57c__substeps_i55_zdw_k1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">System</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Types</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> in the Explorer pane.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Search for the Band item type.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Click the <span class="ph uicontrol">Search by type</span> toolbar button to list the bands in the database.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loioce4e966c8e2c4d24bb17c8083bfdf57c__fig_qhn_32w_k1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loioce4e966c8e2c4d24bb17c8083bfdf57c__image_sn2_pkw_k1b" src="../images/loioffe93cec0aea458db9ddb345049b55e1_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Pick one of the bands. </span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Try to set the album sales attribute to a negative number in the details pane and click <span class="ph uicontrol">Save</span>.</span> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Confirm that the correct error message is displayed in the list of validation errors.</span> 
               <div class="itemgroup stepxmp"> 
                <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loioce4e966c8e2c4d24bb17c8083bfdf57c__fig_s4w_42w_k1b"> 
                 <div class="figbody"> 
                  <img xmlns="" class="inline  " id="loioce4e966c8e2c4d24bb17c8083bfdf57c__image_yks_pkw_k1b" src="../images/loio316d23f4b27a49b6bef51df03b3de06c_LowRes.png"> 
                 </div> 
                </div> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testValidationConstraintAfterImpex"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintAfterImpex test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationConstraintAfterImpex test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Define a Validation Constraint Using ImpEx&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Define a Validation Constraint Using ImpEx&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title31"><h1 class="title topictitle1">Custom Validation Constraints</h1></td> 
        <td class="titlearrows"><a href="#title30">▲</a> <a href="#title32" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">Although the validation framework provides all constraints from the JSR 303 specification, sometimes you need other constraint types that are specific to your project. </p> 
     <p class="p">In our case, too often a band's history is set to a piece of placeholder text instead of the meaningful, genuine background of the band. Create a constraint that prevents this occurrence by looking for text that is missing, or starts with "lorem ipsum". </p> 
     <p class="p">The new constraint type extends <span class="keyword apiname">AttributeConstraint</span> because you are validating the values of attributes, not of the type as a whole. If you want to create constraints that apply to the whole of an item, extend <span class="keyword apiname">TypeConstraint</span> instead. The <span class="keyword apiname">only</span> attribute holds a reference to the Java annotation class that defines our constraint as a Java annotation. </p> 
     <p class="p">The <span class="keyword apiname">@Constraint</span> annotation specifies a <span class="keyword apiname">NotLoremIpsumValidator</span> class that provides the actual logic for checking the constraint. The constraint checks that if the value is not null or empty, and that it does not start with the phrase lorem ipsum. Of course, you can get more sophisticated but this good enough for the purposes of the exercise. </p> 
     <p class="p">Note that you can see the other mapping properties for the built-in constraint types in the file <span class="ph filepath">ext/validation/project.properties</span> in the platform project. </p> 
    </div> 
    <table id="anchorrow31"> 
     <tbody> 
      <tr id="row31"> 
       <td id="row31"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio604047598d374f1ab5ec88e778b80a67"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Define a Custom Validation Constraint</h2></td> 
            <td id="copiersrow31"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Define a Validation Constraint Using ImpEx' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack31">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Define a Validation Constraint Using ImpEx"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack31">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Although the validation framework provides all constraints from the JSR 303 specification, sometimes you need other constraint types. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testValidationCustomConstraint&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testValidationCustomConstraint"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationCustomConstraint test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationCustomConstraint test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the Constraint Item Type.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">Add the following item type definition to the <span class="ph filepath">concerttours-items.xml</span> file in the <span class="ph filepath">resources</span> folder of the <span class="keyword apiname">concerttours</span> extension. </p> 
              <code-snippet id="concerttours-items.xml_customvalidation"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to edit the <span class="ph filepath">concerttours-items.xml</span> file or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-items.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithCustomValidation.xml</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithCustomValidation.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-items.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="type %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-itemsWithCustomValidation.xml > %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-items.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the annotation interface called <span class="keyword apiname">NotLoremIpsum</span> in a package called <span class="ph filepath">concerttours.constraints</span> under the <span class="ph filepath">src</span> folder of the <span class="keyword apiname">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.constraints.NotLoremIpsum"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the interface or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/constraints/NotLoremIpsum.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/constraints/NotLoremIpsum.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/constraints/NotLoremIpsum.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/constraints/NotLoremIpsum.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\constraints\NotLoremIpsum.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\constraints\NotLoremIpsum.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the validator class by creating a new class called <span class="keyword apiname">NotLoremIpsumValidator</span> in the same <span class="ph filepath">concerttours.constraints</span> package under the <span class="ph filepath">src</span> folder of the <span class="keyword apiname">concerttours</span> extension, and copying in the following content. </span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.constraints.NotLoremIpsumValidator"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the custom validator or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/constraints/NotLoremIpsumValidator.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/constraints/NotLoremIpsumValidator.java</span></p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/constraints/NotLoremIpsumValidator.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/constraints/NotLoremIpsumValidator.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\constraints\NotLoremIpsumValidator.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\constraints\NotLoremIpsumValidator.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild and initialize the database because you have changed an <span class="ph filepath">items.xml</span> file.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant build initialize"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant build initialize"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Add the following property to the <span class="ph filepath">local.properties</span> file in the &lt;HYBRIS_CONFIG_DIR&gt; directory to tell the platform that your constraint is for checking character strings (and not for numbers and dates).</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="validation.properties"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to edit the <span class="ph filepath">local.properties</span> file or you want to skip this step, run the following command. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cat $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/config/validation.properties >> $HYBRIS_HOME_DIR/hybris/config/local.properties"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="type %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\config\validation.properties >> %HYBRIS_HOME_DIR%\hybris\config\local.properties"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Check the new constraint type.</span> 
             <ol type="a" class="ol substeps" id="loio604047598d374f1ab5ec88e778b80a67__substeps_fxr_vrz_n1b"> 
              <li class="li substep"> <span class="ph cmd">Open <span class="ph">Backoffice</span> at curl9002<span class="ph filepath">/backoffice</span> and log in with user <kbd class="ph userinput">admin</kbd> and password <kbd class="ph userinput">nimda</kbd>.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Create a new <span class="keyword apiname">NotLoremIpsum</span> constraint for the Band history attribute in the same way you created the new <span class="keyword apiname">MinConstraint</span> previously and give it the ID <kbd class="ph userinput">NotIpsum</kbd>.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Try modifying the history attributes of one of the bands so that it starts with lorem ipsum, and confirm that the correct error message appears when you click <span class="ph uicontrol">Save</span>.</span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testValidationCustomConstraint"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationCustomConstraint test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testValidationCustomConstraint test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Define a Custom Validation Constraint&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Define a Custom Validation Constraint&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title32"><h1 class="title topictitle1">Integration Test for the Custom Constraint</h1></td> 
        <td class="titlearrows"><a href="#title31">▲</a> <a href="#title33" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc">Become familiar with how to use the <span class="ph">SAP Commerce</span> validation service in code. </p> 
     <p class="p">Write a test that checks whether the constraint is working as expected. Use ImpEx to load the constraint into the database, and then the validation service to load it from the database into the validation engine. </p> 
    </div> 
    <table id="anchorrow32"> 
     <tbody> 
      <tr id="row32"> 
       <td id="row32"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loiob9f5dc8af820458f9e697b8eb909e202"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Write an Integration Test for the Custom Constraint</h2></td> 
            <td id="copiersrow32"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Define a Custom Validation Constraint' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack32">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Define a Custom Validation Constraint"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack32">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Check that the constraint is working as expected and introduces the Hybris Validation service in the code. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testCustomConstraintIntegrationTest&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testCustomConstraintIntegrationTest"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testCustomConstraintIntegrationTest test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testCustomConstraintIntegrationTest test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Load the Constraint via Impex by adding the new Lorem Ipsum constraint to the <span class="ph filepath">essentialdata-constraints.impex</span> file.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="essentialdata-constraints2.impex"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to add the constraint or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/impex/essentialdata-constraints.impex</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/impex/validation/essentialdata-constraints-2.impex</span>. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/impex/validation/essentialdata-constraints-2.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/essentialdata-constraints.impex"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\impex\validation\essentialdata-constraints-2.impex %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\essentialdata-constraints.impex"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create the integration test called <span class="keyword apiname">NotLoremIpsumConstraintTest</span> in the <span class="keyword apiname">concerttours.constraints</span> package under the <span class="ph filepath">testsrc</span> folder of the <span class="keyword apiname yext">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.constraints.NotLoremIpsumConstraintTest"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to add the constraint or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/constraints/NotLoremIpsumConstraintTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/constraints/NotLoremIpsumConstraintTest.java</span>. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/constraints/NotLoremIpsumConstraintTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/constraints/NotLoremIpsumConstraintTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\constraints\NotLoremIpsumConstraintTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\constraints\NotLoremIpsumConstraintTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Initialize the system.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all yunitinit"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all yunitinit"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the integration tests.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">View the test results at <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/junit/index.html</span></span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testCustomConstraintIntegrationTest"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testCustomConstraintIntegrationTest test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testCustomConstraintIntegrationTest test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Write an Integration Test for the Custom Constraint&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Write an Integration Test for the Custom Constraint&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title33"><h1 class="title topictitle1">Media Files</h1></td> 
        <td class="titlearrows"><a href="#title32">▲</a> <a href="#title34" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc"><span class="ph">SAP Commerce</span> supports media files. A media file can be anything that can be saved on a file system. </p> 
     <p class="p">Media files include a Flash animation file, a JPEG image, an MPEG video file, a CSV file, a text file, an XML file, and more. The <span class="ph">SAP Commerce</span> platform does not store media files in its database. Instead, it defines a media item type that names and describes a particular media file, and knows where the file is physically stored. In other words, media items in <span class="ph">SAP Commerce</span> are not the media files themselves, but references (URLs) to those files. The actual referenced media files can be stored in various locations. You can keep them locally, or store them remotely using Amazon S3, Windows Azure Blob, or MongoDB GridFS solutions, for example. </p> 
     <p class="p">In addition to a unique ID and a description, a media item has the following attributes:</p> 
     <ul class="ul" id="loio0bf2fe314cfa4e298e9621da0f776ae3__ul_hwt_3yr_l1b"> 
      <li class="li">It is assigned to a catalog version. Media items for products can be synchronized between catalog versions at the same time as the related product details. </li> 
      <li class="li">It can have access to it controlled through lists of permitted and denied principals (users). </li> 
      <li class="li">It is associated with a media format that is used to tag different media items as being appropriate for the same uses. </li> 
      <li class="li">It is included in a media container, typically used to group media files of the same content that are in different formats: for example, the same image but in different sizes or encodings (png, jpg, bmp). </li> 
     </ul> 
     <p class="p">To make the band pages a little more interesting, you can include pictures of each band. Use a smaller version of the image for the list page, and a larger one for the details page. </p> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8c0fbaf186691014b1389bc475fb7b02.html" title="SAP Commerce supports media files of all sorts. A media can be anything that can be saved on a file system, such as a Flash animation file, a JPEG image, an MPEG video file, a CSV file, a text file, an XML file, and other. These medias can be stored in various locations. You can keep them locally or remotely using Amazon S3, Windows Azure Blob or MongoDB GridFS solutions. Access to your medias can be also secured.">Media</a> 
     </div> 
    </div> 
    <table id="anchorrow33"> 
     <tbody> 
      <tr id="row33"> 
       <td id="row33"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio61b4458287434ea7bc4baed9e119a828"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Add Media Files</h2></td> 
            <td id="copiersrow33"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Write an Integration Test for the Custom Constraint' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack33">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Write an Integration Test for the Custom Constraint"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack33">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Add images for the yRock band. You can of course add images for others, too.</p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testBandImages&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testBandImages"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBandImages test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBandImages test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Modify the <span class="keyword apiname">Band</span> business logic to include images.</span> 
             <ol type="a" class="ol substeps" id="loio61b4458287434ea7bc4baed9e119a828__substeps_p2h_mcs_l1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Add a media container attribute to the <span class="keyword apiname">Band</span> item type.</span> 
               <div class="itemgroup stepxmp"> 
                <p class="p">Add the following attribute definition to the Band item type in the <span class="ph filepath">concerttours-items.xml</span> file in the resources folder of the concerttours extension: </p> 
                <code-snippet id="concerttours-items.xml_media"></code-snippet> 
               </div> 
               <div class="itemgroup info"> 
                <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to edit the <span class="ph filepath">concerttours-items.xml</span> file, or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-items.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithMedia.xml </span>. </p> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-itemsWithMedia.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-items.xml"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-itemsWithMedia.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-items.xml"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Add a URL attribute to the <span class="keyword apiname">BandData</span> bean.</span> 
               <div class="itemgroup stepxmp"> 
                <p class="p">Add the following attribute definition to the <span class="keyword apiname">BandData</span> definition in the <span class="ph filepath">concerttours-beans.xml</span> file in the <span class="ph filepath">resources</span> folder of the <span class="keyword apiname">concerttours</span> extension: </p> 
                <code-snippet id="concerttours-beans.xml_media"></code-snippet> 
               </div> 
               <div class="itemgroup info"> 
                <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to edit the <span class="ph filepath">concerttours-beans.xml</span> file, or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-beans.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-beansWithMedia.xml </span>. </p> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-beansWithMedia.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-beans.xml"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-beansWithMedia.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-beans.xml"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Update the facades to retrieve the image in the relevant format.</span> 
               <div class="itemgroup stepxmp"> 
                <p class="p">Modify the contents of the <span class="keyword apiname">DefaultBandFacade</span> class to add the handling of the different formats of images: </p> 
                <code-snippet id="concerttours.facades.impl.DefaultBandFacadeWithMedia"></code-snippet> 
               </div> 
               <div class="itemgroup info"> 
                <aside class="note note insertion"> 
                 <span class="title">Note</span> 
                 <p class="p">With this modification you do the following:</p> 
                 <ul class="ul" id="loio61b4458287434ea7bc4baed9e119a828__ul_ogq_pls_l1b"> 
                  <li class="li">You use the <span class="keyword apiname">mediaService</span> to get specific media format models. </li> 
                  <li class="li">In the <span class="keyword apiname">getBands()</span> method, you retrieve the <span class="keyword apiname">bandList</span> format of the image, the smaller version of the image. </li> 
                  <li class="li">In the <span class="keyword apiname">getBand()</span> method, we retrieve the <span class="keyword apiname">bandDetail</span> format of the image, the larger version of the image. </li> 
                  <li class="li">You return the URL of the image that needs to be displayed. </li> 
                  <li class="li">You have hardcoded a dependency on the existence of two specific media formats. If they are not present, an exception is thrown. The two media formats have become essential data items. </li> 
                 </ul> 
                 <p class="p">An optional enhancement that you could make is to return a default image when a Band has not had an image provided yet. Another enhancement would also return any alt-text specified for the image within the data transfer object (DTO). </p> 
                </aside> 
                <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to edit the <span class="ph filepath">DefaultBandFacade</span>, or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/facades/impl/DefaultBandFacade.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/impl/DefaultBandFacadeWithMedia.java</span>. </p> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/impl/DefaultBandFacadeWithMedia.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/facades/impl/DefaultBandFacade.java"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\facades\impl\DefaultBandFacadeWithMedia.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\facades\impl\DefaultBandFacade.java"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Update <span class="ph filepath">concerttours-spring.xml</span> to inject the <span class="keyword apiname">DefaultBandFacade</span> with the <span class="keyword apiname">MediaService</span>.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="injectingDefaultBandFacadeWithMedia"></code-snippet> 
               </div> 
               <div class="itemgroup info"> 
                <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to edit the <span class="ph filepath">concerttours-beans.xml</span> file, or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withMedia.xml </span>. </p> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withMedia.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-spring.xml"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-spring-withMedia.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-spring.xml"></q> 
                </div> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Initialize, and update your system.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all build initialize updatesystem"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all build initialize updatesystem"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Modify the Band JSPs to include images by updating the<span class="ph filepath">BandList.jsp</span> and <span class="ph filepath">BandDetails.jsp</span> pages as follows. </span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="BandDetailsWithMedia.jsp"></code-snippet> 
              <code-snippet id="BandListWithMedia.jsp"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to edit the JSP files or you want to skip this step, replace button to create two new media formats. The first with qualifier <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/web/webroot/WEB-INF/views/BandList.jsp</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/web/webroot/WEB-INF/views/BandListWithMedia.jsp</span>, and <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/web/webroot/WEB-INF/views/BandDetails.jsp</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/web/webroot/WEB-INF/views/BandDetailsWithMedia.jsp</span>. </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/web/webroot/WEB-INF/views/BandListWithMedia.jsp $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/web/webroot/WEB-INF/views/BandList.jsp"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/web/webroot/WEB-INF/views/BandDetailsWithMedia.jsp $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/web/webroot/WEB-INF/views/BandDetails.jsp"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\web\webroot\WEB-INF\views\BandListWithMedia.jsp %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\web\webroot\WEB-INF\views\BandList.jsp"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\web\webroot\WEB-INF\views\BandDetailsWithMedia.jsp %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\web\webroot\WEB-INF\views\BandDetails.jsp"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Add two new media formats.</span> 
             <ol type="a" class="ol substeps" id="loio61b4458287434ea7bc4baed9e119a828__substeps_s51_cmc_p1b"> 
              <li class="li substep"> <span class="ph cmd">In the <span class="ph">Backoffice Administration Cockpit</span>, navigate to the <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Multimedia</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Media Formats</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> item in the Explorer Tree.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Click on the <span class="ph uicontrol">plus</span><kbd class="ph userinput">bandDetail</kbd> and name <kbd class="ph userinput">Band Detail Format</kbd>, and the second with qualifier <kbd class="ph userinput">bandList</kbd> and name <kbd class="ph userinput">Band List Format</kbd>.</span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Find appropriate images for each of the six bands.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Use an image editing tool to create two JPEG versions of each image: one 600 pixels wide for the details page and one 100 pixels wide for the list page.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">Give the images the following names:</p> 
              <ul class="sl simple"> 
               <li class="sli">bigbandBig.jpg</li> 
               <li class="sli">bigbandSmall.jpg</li> 
               <li class="sli">danceBig.jpg</li> 
               <li class="sli">danceSmall.jpg</li> 
               <li class="sli">jazzBig.jpg</li> 
               <li class="sli">jazzSmall.jpg</li> 
               <li class="sli">omphaBig.jpg</li> 
               <li class="sli">omphaSmall.jpg</li> 
               <li class="sli">orchestraBig.jpg</li> 
               <li class="sli">orchestraSmall.jpg</li> 
               <li class="sli">rockBig.jpg</li> 
               <li class="sli">rockSmall.jpg</li> 
              </ul> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Add two new media items for the yRock band.</span> 
             <ol type="a" class="ol substeps" id="loio61b4458287434ea7bc4baed9e119a828__substeps_sqj_3mc_p1b"> 
              <li class="li substep"> <span class="ph cmd">In the <span class="ph">Backoffice Administration Cockpit</span>, navigate to the <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Multimedia</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Media</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> item in the Explorer Tree.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Create one new media item with the identifier <kbd class="ph userinput">yRockSmall</kbd> button to create two new media and catalog version <kbd class="ph userinput">concertoursProductCatalog: Online</kbd>. </span> </li> 
              <li class="li substep"> <span class="ph cmd">Add a second new media item with the identifier <kbd class="ph userinput">yRockLarge</kbd> and catalog version <kbd class="ph userinput">concertoursProductCatalog: Online</kbd>.</span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a media container for the yRock band images.</span> 
             <ol type="a" class="ol substeps" id="loio61b4458287434ea7bc4baed9e119a828__substeps_qgq_lmc_p1b"> 
              <li class="li substep"> <span class="ph cmd">In the <span class="ph">Backoffice Administration Cockpit</span>, navigate to the <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Multimedia</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Media Containers</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> item in the Explorer Tree.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Click on the <span class="ph uicontrol">plus</span> button to create a new media container with the name and qualifier set to <kbd class="ph userinput">yRockImageContainer</kbd>.</span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Add an image to each item.</span> 
             <ol type="a" class="ol substeps" id="loio61b4458287434ea7bc4baed9e119a828__substeps_gzq_nmc_p1b"> 
              <li class="li substep"> <span class="ph cmd">In the <span class="ph">Backoffice Administration Cockpit</span>, navigate to the <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">Multimedia</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Media</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> item in the Explorer Tree.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Click <span class="ph uicontrol">search</span> to list all media items, including <span class="keyword apiname">yRockSmall.jpg</span> and <span class="keyword apiname">yRockLarge.jpg</span>.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Click on <span class="keyword apiname">yRockSmall</span>, upload the image <span class="ph filepath">rockSmall.jpg</span>, specify <kbd class="ph userinput">bandList</kbd> as the Media format, and <kbd class="ph userinput">yRockImageContainer</kbd> as the Media container.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Click on <span class="keyword apiname">yRockLarge</span>, upload the image <span class="ph filepath">rockBig.jpg</span> and specify <kbd class="ph userinput">bandDetail</kbd> as the Media format, and <kbd class="ph userinput">yRockImageContainer</kbd> as the Media container.</span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Assign the media container to its respective band.</span> 
             <ol type="a" class="ol substeps" id="loio61b4458287434ea7bc4baed9e119a828__substeps_p4d_rmc_p1b"> 
              <li class="li substep"> <span class="ph cmd">In the <span class="ph">Backoffice Administration Cockpit</span>, navigate to <span class="ph menucascade"><img src="../images/themes/sap-hybris/img/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"><span class="ph uicontrol">System</span>&nbsp;<img src="../images/themes/sap-hybris/img/navstep.gif" alt="Next navigation step" title="Next navigation step">&nbsp;<span class="ph uicontrol">Types</span><img src="../images/themes/sap-hybris/img/navend.gif" alt="End of the navigation path" title="End of the navigation path"></span> in the Explorer pane.</span> </li> 
              <li class="li substep"> <span class="ph cmd">Search for the yRock band.</span> </li> 
              <li class="li substep"><span class="ph cmd">Set its <span class="ph uicontrol">Band.image</span> field to <kbd class="ph userinput">yRockImageContainer</kbd>.</span> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Verify that you can see the images on the band pages.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">You should see the images on the following pages:</p> 
              <ul class="ul" id="loio61b4458287434ea7bc4baed9e119a828__ul_owk_pyy_l1b"> 
               <li class="li">curl9002<span class="ph filepath">/concerttours/bands</span></li> 
               <li class="li">curl9002<span class="ph filepath">/concerttours/bands/A001</span></li> 
              </ul> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">To define multiple media items, formats, and containers, use ImpEx and define them as essential data so that the media format items are loaded into the database before you load the project data</span> 
             <ol type="a" class="ol substeps" id="loio61b4458287434ea7bc4baed9e119a828__substeps_bms_kzy_l1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Create a new file called <span class="ph filepath">essentialdata-mediaformats.impex</span> in the <span class="ph filepath">resources/impex</span> folder of the <span class="keyword apiname">conccerttours</span> extension, and setting the contents as follows.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="essentialdata-mediaformats.impex"></code-snippet> 
               </div> 
               <div class="itemgroup info"> 
                <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the ImpEx file or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/impex/media/essentialdata-mediaformats.impex</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/impex/</span></p> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/impex/media/essentialdata-mediaformats.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="copy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\impex\media\essentialdata-mediaformats.impex %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Add media files to the project by copying the band images into a new folder called <span class="ph filepath">bandimages</span> under the existing <span class="ph filepath">resources/concerttours</span> folder in the <span class="keyword apiname">concerttours</span> extension.</span> 
               <div class="itemgroup stepxmp"> 
                <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to add the media files or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/bandimages/* </span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours/bandimages/</span></p> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="mkdir -p $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours/bandimages; cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/bandimages/* $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours/bandimages/"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\bandimages\* %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours\bandimages\"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Add media data to the bands ImpEx file by updating the contents of the <span class="ph filepath">concerttours-bands.impex</span> file in the <span class="ph filepath">resources/impex</span> folder of the <span class="keyword apiname yext">conccerttours</span> extension as follows. </span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="concerttours-bands.impex_media"></code-snippet> 
                <aside class="note note insertion"> 
                 <span class="title">Note</span> 
                 <p class="p">One band is left without associated images to check that the system processes this situation robustly. </p> 
                </aside> 
               </div> 
               <div class="itemgroup info"> 
                <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the ImpEx file or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/impex/media/concerttours-bands.impex</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/impex/</span></p> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/impex/media/concerttours-bands.impex $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/impex/"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="copy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\impex\media\concerttours-bands.impex %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\impex\"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
               <div class="itemgroup stepxmp"> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Initialize the system.</span> 
               <div class="itemgroup stepxmp"> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant initialize"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%/hybris/bin/platform &amp; ant initialize"></q> 
                </div> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Verify that you can see the images on the band pages.</span> 
             <div class="itemgroup stepresult"> 
              <p class="p">You should see the images on the following pages:</p> 
              <ul class="ul" id="loio61b4458287434ea7bc4baed9e119a828__ul_gc3_1mz_l1b"> 
               <li class="li">curl9002<span class="ph filepath">/concerttours/bands</span></li> 
               <li class="li">curl9002<span class="ph filepath">/concerttours/bands/A001</span></li> 
              </ul> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Fix the test cases.</span> 
             <ol type="a" class="ol substeps" id="loio61b4458287434ea7bc4baed9e119a828__substeps_dtg_bnz_l1b"> 
              <li class="li substep substepexpand"> <span class="ph cmd">Add a call to <span class="keyword apiname">importCsv</span> to the <span class="keyword apiname">setUp()</span> method of the <span class="keyword apiname">DefaultBandFacadeIntegrationTest</span> class.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="concerttours.facades.impl.DefaultBandFacadeIntegrationTestWithImportCSV"></code-snippet> 
               </div> 
               <div class="itemgroup info"> 
                <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to edit the integration test or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationTestWithImportCSV.java</span>. </p> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationTestWithImportCSV.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationTest.java"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\facades\impl\DefaultBandFacadeIntegrationTestWithImportCSV.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\facades\impl\DefaultBandFacadeIntegrationTest.java"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Add a call to <span class="keyword apiname">importCsv</span> to the <span class="keyword apiname">testBandServiceTours()</span> method of the <span class="keyword apiname">DefaultBandServiceIntegrationTest</span> class.</span> 
               <div class="itemgroup stepxmp"> 
                <code-snippet id="concerttours.service.impl.DefaultBandServiceIntegrationTestWithImportCSV"></code-snippet> 
               </div> 
               <div class="itemgroup info"> 
                <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to edit the integration test or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceIntegrationTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceIntegrationTestWithImportCSV.java</span>. </p> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceIntegrationTestWithImportCSV.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/service/impl/DefaultBandServiceIntegrationTest.java"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="copy /y %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\service\impl\DefaultBandServiceIntegrationTestWithImportCSV.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\service\impl\DefaultBandServiceIntegrationTest.java"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Initialize the system.</span> 
               <div class="itemgroup stepxmp"> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all yunitinit"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all yunitinit"></q> 
                </div> 
               </div> </li> 
              <li class="li substep substepexpand"> <span class="ph cmd">Run the tests to confirm that they all pass.</span> 
               <div class="itemgroup stepxmp"> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="xnix" src="../images/../images/apple.png" height="16"> 
                 <q style="pass" class="xnix" cite="ant alltests -Dtestclasses.packages=concerttours.*"></q> 
                </div> 
                <div style="margin-bottom: 0;" class="os"> 
                 <img class="windows" src="../images/../images/windows.png" height="16"> 
                 <q style="pass" class="windows" cite="ant alltests -Dtestclasses.packages=concerttours.*"></q> 
                </div> 
               </div> </li> 
             </ol> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Start <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh start"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat start"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testBandImages"></this-test> acceptance test again and confirm that now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBandImages test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testBandImages test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Add Media Files&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Add Media Files&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>     
    <div class="topichead"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="y123A" id="title34"><h1 class="title topictitle1">Properties Files</h1></td> 
        <td class="titlearrows"><a href="#title33">▲</a> <a href="#title35" '>▼</a></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="body conbody"> 
     <p class="shortdesc"><span class="ph">SAP Commerce</span> relies on two essential configuration files: project.properties and local.properties. Project properties are the <span class="ph">SAP Commerce</span> defaults, while local properties is where you may define your own configuration for your extension. </p> 
     <p class="p">You can set values in different properties files. Each file has a different priority and its values can override the values of another file with lower priority. The order of priority from hight to low is: </p> 
     <ol class="ol"> 
      <li class="li">The <span class="ph filepath">local.properties</span> file is a working copy of the <span class="ph filepath">project.properties</span> file, located in the &lt;HYBRIS_CONFIG_DIR&gt; directory. It allows you to override default settings from the <span class="ph filepath">project.properties</span> file. Use the <span class="ph filepath">local.properties</span> file to set values for configuration properties that you need to configure for your project. </li> 
      <li class="li">The extension-specific <span class="ph filepath">project.properties</span> file is located in the <span class="ph filepath">&lt;HYBRIS_BIN_DIR&gt;/&lt;EXTENSION_DIR&gt;</span>. It defines the values used for the extension. </li> 
      <li class="li">The global <span class="ph filepath">project.properties</span> file is located in the <span class="ph filepath">&lt;HYBRIS_BIN_DIR&gt;/platform</span> directory, and provides factory default settings. It is not recommended to edit this file. </li> 
     </ol> 
    </div> 
    <div class="relinfo"> 
     <div class="relinfotitle ">
       Related Information 
     </div> 
     <div> 
      <a target="_blank" class="link" href="https://help.hybris.com/1811/hcd/8b8e13c9866910149d40b151a9196543.html" title="SAP Commerce has a wide array of configuration parameters that allow specifying runtime settings for various parts of the solution. This includes the database, the application server, and more.">Configuring the Behavior of SAP Commerce</a> 
     </div> 
    </div> 
    <table id="anchorrow34"> 
     <tbody> 
      <tr id="row34"> 
       <td id="row34"> 
        <div class="topic task nested1" aria-labelledby="ariaid-title2" lang="en-US" id="loio8820968bb5db472eba27911d5d6b7b37"> 
         <br> 
         <table width="100%"> 
          <tbody> 
           <tr> 
            <td class="fill"></td> 
            <td class="y123B" nowrap><h2>Define Default Property Values</h2></td> 
            <td id="copiersrow34"></td> 
            <td nowrap width="1%" align="right"><cite class="xnix">cd $HYBRIS_HOME_DIR/hybris; git reset --hard `git --git-dir $HYBRIS_HOME_DIR/hybris/.git log master --pretty=oneline | grep -i 'Add Media Files' | awk '{print $1;}'`</cite><span class="xnix copyer" id="gitRollBack34">Copy Rollback</span><img class="xnix" src="../images/gitgray.png" height="16"><cite class="windows">cd $HYBRIS_HOME_DIR/hybris &amp; FOR /F %G IN ('git log --oneline ^| findstr /I /C:"Add Media Files"') DO git checkout -f %G</cite><span class="windows copyer" id="gitRollBack34">Copy Rollback</span><img class="windows" src="../images/gitgray.png" height="16"></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="body taskbody"> 
          <p class="shortdesc">Create a <span class="ph filepath">project.properties</span> file that defines default configuration property values for your extension. </p> 
          <div class="section prereq p"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Prerequisites</h3> 
           </div> 
           <span class="ph">The following acceptance test is included in your <span class="ph filepath">Hybris123Tests.java</span> file.</span> 
           <div style="margin-bottom: 0;"> 
            <a href="javascript:runATest(&quot;com.hybris.hybris123.Hybris123Tests_testPropertiesFiles&quot;)"><h3 class="sectiontitle tasklabel" style="margin-top: 10px;">Acceptance Test <u>►</u></h3></a> 
           </div> 
           <acceptance-test id="com.hybris.hybris123.Hybris123Tests_testPropertiesFiles"></acceptance-test> 
           <span class="ph">Before you begin this step, run the test to confirm that it fails by executing this command:</span> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="xnix" src="../images/../images/apple.png" height="16"> 
            <q style="fail" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testPropertiesFiles test"></q> 
           </div> 
           <div style="margin-bottom: 0;" class="os"> 
            <img class="windows" src="../images/../images/windows.png" height="16"> 
            <q style="fail" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testPropertiesFiles test"></q> 
           </div> 
          </div> 
          <section class="section procedure"> 
           <span id="steps" class="anchor"></span> 
           <div class="ol steps tasklabel"> 
            <h3 class="sectiontitle tasklabel">Procedure</h3> 
           </div> 
           <ol class="ol steps"> 
            <li class="li step stepexpand"> <span class="ph cmd">Stop <span class="ph">SAP Commerce</span>.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ./hybrisserver.sh stop"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; hybrisserver.bat stop"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Update the facade class to use property values.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">Edit the <span class="keyword apiname">DefaultBandFacade</span> class in the <span class="keyword apiname">concerttours.facades.impl</span> package under the <span class="ph filepath">src</span> directory of the <span class="keyword apiname">concerttours</span> extension. Replace hard-coded values with property names as follows: </p> 
              <code-snippet id="concerttours.facades.impl.DefaultBandFacadeWithProperties"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to update the facade yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/src/concerttours/facades/impl/DefaultBandFacade.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/impl/DefaultBandFacadeWithProperties.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/src/concerttours/facades/impl/DefaultBandFacadeWithProperties.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/src/concerttours/facades/impl/DefaultBandFacade.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo f | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\src\concerttours\facades\impl\DefaultBandFacadeWithProperties.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\src\concerttours\facades\impl\DefaultBandFacade.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Update your Spring configuration by adding the injection of the <span class="keyword apiname">ConfigurationService</span> to the <span class="ph filepath">concerttours-spring.xml</span> file.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">The configuration for the <span class="keyword apiname">defaultBandFacade</span> now looks as follows: </p> 
              <code-snippet id="injectingDefaultBandFacadeWithConfigurationService"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to update the Spring XML yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/resources/concerttours-spring.xml</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withConfigurationService.xml</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/resources/concerttours-spring-withConfigurationService.xml $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/resources/concerttours-spring.xml"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo a | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\resources\concerttours-spring-withConfigurationService.xml %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\resources\concerttours-spring.xml"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Define default project properties.</span> 
             <div class="itemgroup stepxmp"> 
              <p class="p">Add the following lines to your <span class="keyword apiname">concerttour</span> extension's <span class="ph filepath">project.properties</span> file. </p> 
              <code-snippet id="projectpropertiesWithBandFormatNames"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to update <span class="ph filepath">project.properties</span> or you want to skip this step, add the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/projectpropertieswithbands.txt</span> to <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/config/project.properties</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cp $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/projectpropertieswithbands.txt $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/project.properties"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="copy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\projectpropertieswithbands.txt %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\project.properties"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Create a new integration test to test the <span class="ph filepath">DefaultBandFacade</span> facade when using these new properties by creating a test class called <span class="ph filepath">concerttours.facades.impl.DefaultBandFacadeIntegrationWithPropertiesTest</span> under the <span class="ph filepath">testsrc</span> folder of the <span class="ph filepath">concerttours</span> extension.</span> 
             <div class="itemgroup stepxmp"> 
              <code-snippet id="concerttours.facades.impl.DefaultBandFacadeIntegrationWithPropertiesTest"></code-snippet> 
             </div> 
             <div class="itemgroup info"> 
              <p class="p"><span class="ph"><span class="ph emphasis emphasis"><span class="ph">SAP Commerce 123 Interactive</span> Shortcut:</span></span> If you are unable to create the test class yourself or you want to skip this step, replace <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationWithPropertiesTest.java</span> with the contents of <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationWithPropertiesTest.java</span> </p> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="ditto $HYBRIS_HOME_DIR/hybris123/src/main/webapp/resources/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationWithPropertiesTest.java $HYBRIS_HOME_DIR/hybris/bin/custom/concerttours/testsrc/concerttours/facades/impl/DefaultBandFacadeIntegrationWithPropertiesTest.java"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="echo F | xcopy %HYBRIS_HOME_DIR%\hybris123\src\main\webapp\resources\concerttours\testsrc\concerttours\facades\impl\DefaultBandFacadeIntegrationWithPropertiesTest.java %HYBRIS_HOME_DIR%\hybris\bin\custom\concerttours\testsrc\concerttours\facades\impl\DefaultBandFacadeIntegrationWithPropertiesTest.java"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Rebuild <span class="ph">SAP Commerce</span> with Ant.</span> 
             <div class="itemgroup stepxmp" id="loio8820968bb5db472eba27911d5d6b7b37__d7e96"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant clean all"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant clean all"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the integration tests.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris/bin/platform; ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris\bin\platform &amp; ant integrationtests -Dtestclasses.packages=concerttours.*"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">View the test results at <span class="ph filepath">&lt;HYBRIS_HOME_DIR&gt;/hybris/log/junit/index.html</span> and confirm that <span class="ph filepath">DefaultBandFacadeIntegrationWithPropertiesTest</span> has passed.</span> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Run the 
              <this-test id="com.hybris.hybris123.Hybris123Tests_testPropertiesFiles"></this-test> acceptance test again and confirm that it now passes.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris123; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testPropertiesFiles test"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris123 &amp; mvn -Dtest=com.hybris.hybris123.runtime.tests.Hybris123Tests#testPropertiesFiles test"></q> 
              </div> 
             </div> </li> 
            <li class="li step stepexpand"> <span class="ph cmd">Commit the changes to your local Git repository.</span> 
             <div class="itemgroup stepxmp"> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="xnix" src="../images/../images/apple.png" height="16"> 
               <q style="pass" class="xnix" cite="cd $HYBRIS_HOME_DIR/hybris; git add . ; git commit -m &quot;Define Default Property Values&quot;"></q> 
              </div> 
              <div style="margin-bottom: 0;" class="os"> 
               <img class="windows" src="../images/../images/windows.png" height="16"> 
               <q style="pass" class="windows" cite="cd %HYBRIS_HOME_DIR%\hybris &amp; git add . &amp; git commit -m &quot;Define Default Property Values&quot;"></q> 
              </div> 
             </div> </li> 
           </ol> 
          </section> 
          <div class="section result" id="loio8820968bb5db472eba27911d5d6b7b37__result_jgr_kk4_4bb"> 
           <span id="results" class="anchor"></span> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Results</h3> 
           </div>Congratulations! You have completed the tour. You should now have a good understanding of the core concepts of 
           <span class="ph">SAP Commerce</span>. 
          </div> 
          <div class="section postreq"> 
           <div class="tasklabel"> 
            <h3 class="sectiontitle tasklabel">Next Steps</h3> 
           </div> 
           <span class="ph">If you are going through multiple guided tours, delete any unzipped <span class="ph">SAP Commerce</span> folders and restart your computer between tours to be sure that there are no <span class="ph">SAP Commerce</span> threads still running. Then perform the steps in <a class="xref" href="https://help.hybris.com/1811/hcd/3f274d777fea4b589579c15630d44f99.html" title="Before you start a SAP Commerce 123 tour, you need to carry out a few preparatory steps.">Before You Start</a> and start your next tour.</span> 
          </div> 
         </div> 
        </div></td> 
      </tr> 
     </tbody> 
    </table>  
   </div> 
  </div> 
  <script type="text/javascript" src="scripts/hybris123tail.js"></script>  
 </body>
</html>